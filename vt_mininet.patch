Only in ./linux-3.16.3/arch: alpha
Only in ./linux-3.16.3/arch: arc
Only in ./linux-3.16.3/arch: arm
Only in ./linux-3.16.3/arch: arm64
Only in ./linux-3.16.3/arch: avr32
Only in ./linux-3.16.3/arch: blackfin
Only in ./linux-3.16.3/arch: c6x
Only in ./linux-3.16.3/arch: cris
Only in ./linux-3.16.3/arch: frv
Only in ./linux-3.16.3/arch: .gitignore
Only in ./linux-3.16.3/arch: hexagon
Only in ./linux-3.16.3/arch: ia64
Only in ./linux-3.16.3/arch: Kconfig
Only in ./linux-3.16.3/arch: m32r
Only in ./linux-3.16.3/arch: m68k
Only in ./linux-3.16.3/arch: metag
Only in ./linux-3.16.3/arch: microblaze
Only in ./linux-3.16.3/arch: mips
Only in ./linux-3.16.3/arch: mn10300
Only in ./linux-3.16.3/arch: openrisc
Only in ./linux-3.16.3/arch: parisc
Only in ./linux-3.16.3/arch: powerpc
Only in ./linux-3.16.3/arch: s390
Only in ./linux-3.16.3/arch: score
Only in ./linux-3.16.3/arch: sh
Only in ./linux-3.16.3/arch: sparc
Only in ./linux-3.16.3/arch: tile
Only in ./linux-3.16.3/arch: um
Only in ./linux-3.16.3/arch: unicore32
Only in ./linux-3.16.3/arch/x86: boot
Only in ./linux-3.16.3/arch/x86: configs
Only in ./linux-3.16.3/arch/x86: crypto
Only in ./linux-3.16.3/arch/x86: .gitignore
Only in ./linux-3.16.3/arch/x86: ia32
Only in ./linux-3.16.3/arch/x86: include
Only in ./linux-3.16.3/arch/x86: Kbuild
Only in ./linux-3.16.3/arch/x86: Kconfig
Only in ./linux-3.16.3/arch/x86: Kconfig.cpu
Only in ./linux-3.16.3/arch/x86: Kconfig.debug
Only in ./linux-3.16.3/arch/x86: kernel
Only in ./linux-3.16.3/arch/x86: kvm
Only in ./linux-3.16.3/arch/x86: lguest
Only in ./linux-3.16.3/arch/x86: lib
Only in ./linux-3.16.3/arch/x86: Makefile
Only in ./linux-3.16.3/arch/x86: Makefile_32.cpu
Only in ./linux-3.16.3/arch/x86: Makefile.um
Only in ./linux-3.16.3/arch/x86: math-emu
Only in ./linux-3.16.3/arch/x86: mm
Only in ./linux-3.16.3/arch/x86: net
Only in ./linux-3.16.3/arch/x86: oprofile
Only in ./linux-3.16.3/arch/x86: pci
Only in ./linux-3.16.3/arch/x86: platform
Only in ./linux-3.16.3/arch/x86: power
Only in ./linux-3.16.3/arch/x86: realmode
Only in ./linux-3.16.3/arch/x86/syscalls: Makefile
diff -rup ./linux-3.16.3/arch/x86/syscalls/syscall_32.tbl ./vt_mininet/kernel_changes/arch/x86/syscalls/syscall_32.tbl
--- ./linux-3.16.3/arch/x86/syscalls/syscall_32.tbl	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/arch/x86/syscalls/syscall_32.tbl	2019-03-13 16:02:50.804501956 +0800
@@ -360,3 +360,5 @@
 351	i386	sched_setattr		sys_sched_setattr
 352	i386	sched_getattr		sys_sched_getattr
 353	i386	renameat2		sys_renameat2
+#354	i386	timeclone		sys_timeclone
+#355 i386    helloworld      sys_helloworld
diff -rup ./linux-3.16.3/arch/x86/syscalls/syscall_64.tbl ./vt_mininet/kernel_changes/arch/x86/syscalls/syscall_64.tbl
--- ./linux-3.16.3/arch/x86/syscalls/syscall_64.tbl	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/arch/x86/syscalls/syscall_64.tbl	2019-03-13 16:02:50.804501956 +0800
@@ -323,6 +323,13 @@
 314	common	sched_setattr		sys_sched_setattr
 315	common	sched_getattr		sys_sched_getattr
 316	common	renameat2		sys_renameat2
+#
+# 317 common  timeclone		sys_timeclone
+#
+318 common  virtualtimeunshare		sys_virtualtimeunshare
+319 common  getvirtualtimeofday		sys_getvirtualtimeofday
+320 common  helloworld		sys_helloworld
+321 common  settimedilationfactor		sys_settimedilationfactor
 
 #
 # x32-specific system call numbers start at 512 to avoid cache impact
Only in ./linux-3.16.3/arch/x86/syscalls: syscallhdr.sh
Only in ./linux-3.16.3/arch/x86/syscalls: syscalltbl.sh
Only in ./linux-3.16.3/arch/x86: tools
Only in ./linux-3.16.3/arch/x86: um
Only in ./linux-3.16.3/arch/x86/vdso: checkundef.sh
Only in ./linux-3.16.3/arch/x86/vdso: .gitignore
Only in ./linux-3.16.3/arch/x86/vdso: Makefile
diff -rup ./linux-3.16.3/arch/x86/vdso/vclock_gettime.c ./vt_mininet/kernel_changes/arch/x86/vdso/vclock_gettime.c
--- ./linux-3.16.3/arch/x86/vdso/vclock_gettime.c	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/arch/x86/vdso/vclock_gettime.c	2019-03-13 16:02:50.804501956 +0800
@@ -319,17 +319,19 @@ int clock_gettime(clockid_t, struct time
 
 notrace int __vdso_gettimeofday(struct timeval *tv, struct timezone *tz)
 {
-	if (likely(tv != NULL)) {
-		if (unlikely(do_realtime((struct timespec *)tv) == VCLOCK_NONE))
-			return vdso_fallback_gtod(tv, tz);
-		tv->tv_usec /= 1000;
-	}
-	if (unlikely(tz != NULL)) {
-		tz->tz_minuteswest = gtod->tz_minuteswest;
-		tz->tz_dsttime = gtod->tz_dsttime;
-	}
+    return vdso_fallback_gtod(tv, tz);
 
-	return 0;
+	/*if (likely(tv != NULL)) {*/
+		/*if (unlikely(do_realtime((struct timespec *)tv) == VCLOCK_NONE))*/
+			/*return vdso_fallback_gtod(tv, tz);*/
+		/*tv->tv_usec /= 1000;*/
+	/*}*/
+	/*if (unlikely(tz != NULL)) {*/
+		/*tz->tz_minuteswest = gtod->tz_minuteswest;*/
+		/*tz->tz_dsttime = gtod->tz_dsttime;*/
+	/*}*/
+
+	/*return 0;*/
 }
 int gettimeofday(struct timeval *, struct timezone *)
 	__attribute__((weak, alias("__vdso_gettimeofday")));
Only in ./linux-3.16.3/arch/x86/vdso: vdso2c.c
Only in ./linux-3.16.3/arch/x86/vdso: vdso2c.h
Only in ./linux-3.16.3/arch/x86/vdso: vdso32
Only in ./linux-3.16.3/arch/x86/vdso: vdso32-setup.c
Only in ./linux-3.16.3/arch/x86/vdso: vdso-fakesections.c
Only in ./linux-3.16.3/arch/x86/vdso: vdso-layout.lds.S
Only in ./linux-3.16.3/arch/x86/vdso: vdso.lds.S
Only in ./linux-3.16.3/arch/x86/vdso: vdso-note.S
Only in ./linux-3.16.3/arch/x86/vdso: vdsox32.lds.S
Only in ./linux-3.16.3/arch/x86/vdso: vgetcpu.c
Only in ./linux-3.16.3/arch/x86/vdso: vma.c
Only in ./linux-3.16.3/arch/x86: video
Only in ./linux-3.16.3/arch/x86: xen
Only in ./linux-3.16.3/arch: xtensa
Only in ./linux-3.16.3/: block
Only in ./vt_mininet/kernel_changes/: build_all.sh
Only in ./linux-3.16.3/: COPYING
Only in ./linux-3.16.3/: CREDITS
Only in ./linux-3.16.3/: crypto
Only in ./linux-3.16.3/: Documentation
Only in ./linux-3.16.3/: drivers
Only in ./linux-3.16.3/: firmware
Only in ./linux-3.16.3/: fs
Only in ./linux-3.16.3/: .gitignore
Only in ./vt_mininet/kernel_changes/: howto_submit_patch.md
Only in ./linux-3.16.3/include: acpi
Only in ./linux-3.16.3/include: asm-generic
Only in ./linux-3.16.3/include: clocksource
Only in ./linux-3.16.3/include: crypto
Only in ./linux-3.16.3/include: drm
Only in ./linux-3.16.3/include: dt-bindings
Only in ./linux-3.16.3/include: Kbuild
Only in ./linux-3.16.3/include: keys
Only in ./linux-3.16.3/include: kvm
Only in ./linux-3.16.3/include/linux: 8250_pci.h
Only in ./linux-3.16.3/include/linux: acct.h
Only in ./linux-3.16.3/include/linux: acpi_dma.h
Only in ./linux-3.16.3/include/linux: acpi.h
Only in ./linux-3.16.3/include/linux: acpi_pmtmr.h
Only in ./linux-3.16.3/include/linux: adb.h
Only in ./linux-3.16.3/include/linux: adfs_fs.h
Only in ./linux-3.16.3/include/linux: aer.h
Only in ./linux-3.16.3/include/linux: agp_backend.h
Only in ./linux-3.16.3/include/linux: agpgart.h
Only in ./linux-3.16.3/include/linux: ahci_platform.h
Only in ./linux-3.16.3/include/linux: aio.h
Only in ./linux-3.16.3/include/linux: alarmtimer.h
Only in ./linux-3.16.3/include/linux: altera_jtaguart.h
Only in ./linux-3.16.3/include/linux: altera_uart.h
Only in ./linux-3.16.3/include/linux: amba
Only in ./linux-3.16.3/include/linux: amd-iommu.h
Only in ./linux-3.16.3/include/linux: amifd.h
Only in ./linux-3.16.3/include/linux: amifdreg.h
Only in ./linux-3.16.3/include/linux: amigaffs.h
Only in ./linux-3.16.3/include/linux: anon_inodes.h
Only in ./linux-3.16.3/include/linux: a.out.h
Only in ./linux-3.16.3/include/linux: apm_bios.h
Only in ./linux-3.16.3/include/linux: apm-emulation.h
Only in ./linux-3.16.3/include/linux: apple_bl.h
Only in ./linux-3.16.3/include/linux: arcdevice.h
Only in ./linux-3.16.3/include/linux: arm-cci.h
Only in ./linux-3.16.3/include/linux: asn1_ber_bytecode.h
Only in ./linux-3.16.3/include/linux: asn1_decoder.h
Only in ./linux-3.16.3/include/linux: asn1.h
Only in ./linux-3.16.3/include/linux: assoc_array.h
Only in ./linux-3.16.3/include/linux: assoc_array_priv.h
Only in ./linux-3.16.3/include/linux: async.h
Only in ./linux-3.16.3/include/linux: async_tx.h
Only in ./linux-3.16.3/include/linux: ata.h
Only in ./linux-3.16.3/include/linux: atalk.h
Only in ./linux-3.16.3/include/linux: ata_platform.h
Only in ./linux-3.16.3/include/linux: ath9k_platform.h
Only in ./linux-3.16.3/include/linux: atmdev.h
Only in ./linux-3.16.3/include/linux: atmel-mci.h
Only in ./linux-3.16.3/include/linux: atmel_pdc.h
Only in ./linux-3.16.3/include/linux: atmel-pwm-bl.h
Only in ./linux-3.16.3/include/linux: atmel_pwm.h
Only in ./linux-3.16.3/include/linux: atmel_serial.h
Only in ./linux-3.16.3/include/linux: atmel-ssc.h
Only in ./linux-3.16.3/include/linux: atmel_tc.h
Only in ./linux-3.16.3/include/linux: atm.h
Only in ./linux-3.16.3/include/linux: atm_suni.h
Only in ./linux-3.16.3/include/linux: atm_tcp.h
Only in ./linux-3.16.3/include/linux: atomic.h
Only in ./linux-3.16.3/include/linux: attribute_container.h
Only in ./linux-3.16.3/include/linux: audit.h
Only in ./linux-3.16.3/include/linux: auto_dev-ioctl.h
Only in ./linux-3.16.3/include/linux: auto_fs.h
Only in ./linux-3.16.3/include/linux: auxvec.h
Only in ./linux-3.16.3/include/linux: average.h
Only in ./linux-3.16.3/include/linux: b1pcmcia.h
Only in ./linux-3.16.3/include/linux: backing-dev.h
Only in ./linux-3.16.3/include/linux: backlight.h
Only in ./linux-3.16.3/include/linux: balloon_compaction.h
Only in ./linux-3.16.3/include/linux: basic_mmio_gpio.h
Only in ./linux-3.16.3/include/linux: bcd.h
Only in ./linux-3.16.3/include/linux: bch.h
Only in ./linux-3.16.3/include/linux: bcm47xx_wdt.h
Only in ./linux-3.16.3/include/linux: bcma
Only in ./linux-3.16.3/include/linux: bfin_mac.h
Only in ./linux-3.16.3/include/linux: binfmts.h
Only in ./linux-3.16.3/include/linux: bio.h
Only in ./linux-3.16.3/include/linux: bitmap.h
Only in ./linux-3.16.3/include/linux: bitops.h
Only in ./linux-3.16.3/include/linux: bitrev.h
Only in ./linux-3.16.3/include/linux: bit_spinlock.h
Only in ./linux-3.16.3/include/linux: blkdev.h
Only in ./linux-3.16.3/include/linux: blk-iopoll.h
Only in ./linux-3.16.3/include/linux: blk-mq.h
Only in ./linux-3.16.3/include/linux: blktrace_api.h
Only in ./linux-3.16.3/include/linux: blk_types.h
Only in ./linux-3.16.3/include/linux: blockgroup_lock.h
Only in ./linux-3.16.3/include/linux: bma150.h
Only in ./linux-3.16.3/include/linux: bootmem.h
Only in ./linux-3.16.3/include/linux: bottom_half.h
Only in ./linux-3.16.3/include/linux: brcmphy.h
Only in ./linux-3.16.3/include/linux: bsearch.h
Only in ./linux-3.16.3/include/linux: bsg.h
Only in ./linux-3.16.3/include/linux: bsg-lib.h
Only in ./linux-3.16.3/include/linux: btree-128.h
Only in ./linux-3.16.3/include/linux: btree.h
Only in ./linux-3.16.3/include/linux: btree-type.h
Only in ./linux-3.16.3/include/linux: btrfs.h
Only in ./linux-3.16.3/include/linux: buffer_head.h
Only in ./linux-3.16.3/include/linux: bug.h
Only in ./linux-3.16.3/include/linux: byteorder
Only in ./linux-3.16.3/include/linux: c2port.h
Only in ./linux-3.16.3/include/linux: cache.h
Only in ./linux-3.16.3/include/linux: can
Only in ./linux-3.16.3/include/linux: capability.h
Only in ./linux-3.16.3/include/linux: cb710.h
Only in ./linux-3.16.3/include/linux: cciss_ioctl.h
Only in ./linux-3.16.3/include/linux: ccp.h
Only in ./linux-3.16.3/include/linux: cdev.h
Only in ./linux-3.16.3/include/linux: cdrom.h
Only in ./linux-3.16.3/include/linux: ceph
Only in ./linux-3.16.3/include/linux: cfag12864b.h
Only in ./linux-3.16.3/include/linux: cgroup.h
Only in ./linux-3.16.3/include/linux: cgroup_subsys.h
Only in ./linux-3.16.3/include/linux: circ_buf.h
Only in ./linux-3.16.3/include/linux: cleancache.h
Only in ./linux-3.16.3/include/linux: clk
Only in ./linux-3.16.3/include/linux: clkdev.h
Only in ./linux-3.16.3/include/linux: clk.h
Only in ./linux-3.16.3/include/linux: clk-private.h
Only in ./linux-3.16.3/include/linux: clk-provider.h
Only in ./linux-3.16.3/include/linux: clksrc-dbx500-prcmu.h
Only in ./linux-3.16.3/include/linux: clockchips.h
Only in ./linux-3.16.3/include/linux: clocksource.h
Only in ./linux-3.16.3/include/linux: cm4000_cs.h
Only in ./linux-3.16.3/include/linux: cmdline-parser.h
Only in ./linux-3.16.3/include/linux: cn_proc.h
Only in ./linux-3.16.3/include/linux: cnt32_to_63.h
Only in ./linux-3.16.3/include/linux: coda.h
Only in ./linux-3.16.3/include/linux: coda_psdev.h
Only in ./linux-3.16.3/include/linux: com20020.h
Only in ./linux-3.16.3/include/linux: compaction.h
Only in ./linux-3.16.3/include/linux: compat.h
Only in ./linux-3.16.3/include/linux: compiler-clang.h
Only in ./linux-3.16.3/include/linux: compiler-gcc3.h
Only in ./linux-3.16.3/include/linux: compiler-gcc4.h
Only in ./linux-3.16.3/include/linux: compiler-gcc.h
Only in ./linux-3.16.3/include/linux: compiler.h
Only in ./linux-3.16.3/include/linux: compiler-intel.h
Only in ./linux-3.16.3/include/linux: completion.h
Only in ./linux-3.16.3/include/linux: component.h
Only in ./linux-3.16.3/include/linux: concap.h
Only in ./linux-3.16.3/include/linux: configfs.h
Only in ./linux-3.16.3/include/linux: connector.h
Only in ./linux-3.16.3/include/linux: console.h
Only in ./linux-3.16.3/include/linux: consolemap.h
Only in ./linux-3.16.3/include/linux: console_struct.h
Only in ./linux-3.16.3/include/linux: container.h
Only in ./linux-3.16.3/include/linux: context_tracking.h
Only in ./linux-3.16.3/include/linux: context_tracking_state.h
Only in ./linux-3.16.3/include/linux: cordic.h
Only in ./linux-3.16.3/include/linux: coredump.h
Only in ./linux-3.16.3/include/linux: cper.h
Only in ./linux-3.16.3/include/linux: cpu_cooling.h
Only in ./linux-3.16.3/include/linux: cpufeature.h
Only in ./linux-3.16.3/include/linux: cpufreq.h
Only in ./linux-3.16.3/include/linux: cpu.h
Only in ./linux-3.16.3/include/linux: cpuidle.h
Only in ./linux-3.16.3/include/linux: cpumask.h
Only in ./linux-3.16.3/include/linux: cpu_pm.h
Only in ./linux-3.16.3/include/linux: cpu_rmap.h
Only in ./linux-3.16.3/include/linux: cpuset.h
Only in ./linux-3.16.3/include/linux: cputime.h
Only in ./linux-3.16.3/include/linux: crash_dump.h
Only in ./linux-3.16.3/include/linux: crc16.h
Only in ./linux-3.16.3/include/linux: crc32c.h
Only in ./linux-3.16.3/include/linux: crc32.h
Only in ./linux-3.16.3/include/linux: crc7.h
Only in ./linux-3.16.3/include/linux: crc8.h
Only in ./linux-3.16.3/include/linux: crc-ccitt.h
Only in ./linux-3.16.3/include/linux: crc-itu-t.h
Only in ./linux-3.16.3/include/linux: crc-t10dif.h
Only in ./linux-3.16.3/include/linux: cred.h
Only in ./linux-3.16.3/include/linux: crush
Only in ./linux-3.16.3/include/linux: crypto.h
Only in ./linux-3.16.3/include/linux: cryptohash.h
Only in ./linux-3.16.3/include/linux: cryptouser.h
Only in ./linux-3.16.3/include/linux: cs5535.h
Only in ./linux-3.16.3/include/linux: ctype.h
Only in ./linux-3.16.3/include/linux: cuda.h
Only in ./linux-3.16.3/include/linux: cyclades.h
Only in ./linux-3.16.3/include/linux: cycx_x25.h
Only in ./linux-3.16.3/include/linux: davinci_emac.h
Only in ./linux-3.16.3/include/linux: dcache.h
Only in ./linux-3.16.3/include/linux: dca.h
Only in ./linux-3.16.3/include/linux: dccp.h
Only in ./linux-3.16.3/include/linux: dcookies.h
Only in ./linux-3.16.3/include/linux: debugfs.h
Only in ./linux-3.16.3/include/linux: debug_locks.h
Only in ./linux-3.16.3/include/linux: debugobjects.h
Only in ./linux-3.16.3/include/linux: decompress
Only in ./linux-3.16.3/include/linux: delayacct.h
Only in ./linux-3.16.3/include/linux: delay.h
Only in ./linux-3.16.3/include/linux: dell-led.h
Only in ./linux-3.16.3/include/linux: devfreq.h
Only in ./linux-3.16.3/include/linux: device_cgroup.h
Only in ./linux-3.16.3/include/linux: device.h
Only in ./linux-3.16.3/include/linux: device-mapper.h
Only in ./linux-3.16.3/include/linux: devpts_fs.h
Only in ./linux-3.16.3/include/linux: digsig.h
Only in ./linux-3.16.3/include/linux: dio.h
Only in ./linux-3.16.3/include/linux: dirent.h
Only in ./linux-3.16.3/include/linux: dlm.h
Only in ./linux-3.16.3/include/linux: dlm_plock.h
Only in ./linux-3.16.3/include/linux: dm9000.h
Only in ./linux-3.16.3/include/linux: dma
Only in ./linux-3.16.3/include/linux: dma-attrs.h
Only in ./linux-3.16.3/include/linux: dma-buf.h
Only in ./linux-3.16.3/include/linux: dma-contiguous.h
Only in ./linux-3.16.3/include/linux: dma-debug.h
Only in ./linux-3.16.3/include/linux: dma-direction.h
Only in ./linux-3.16.3/include/linux: dmaengine.h
Only in ./linux-3.16.3/include/linux: dma-mapping.h
Only in ./linux-3.16.3/include/linux: dmapool.h
Only in ./linux-3.16.3/include/linux: dma_remapping.h
Only in ./linux-3.16.3/include/linux: dmar.h
Only in ./linux-3.16.3/include/linux: dm-dirty-log.h
Only in ./linux-3.16.3/include/linux: dmi.h
Only in ./linux-3.16.3/include/linux: dm-io.h
Only in ./linux-3.16.3/include/linux: dm-kcopyd.h
Only in ./linux-3.16.3/include/linux: dm-region-hash.h
Only in ./linux-3.16.3/include/linux: dnotify.h
Only in ./linux-3.16.3/include/linux: dns_resolver.h
Only in ./linux-3.16.3/include/linux: dqblk_qtree.h
Only in ./linux-3.16.3/include/linux: dqblk_v1.h
Only in ./linux-3.16.3/include/linux: dqblk_v2.h
Only in ./linux-3.16.3/include/linux: drbd_genl_api.h
Only in ./linux-3.16.3/include/linux: drbd_genl.h
Only in ./linux-3.16.3/include/linux: drbd.h
Only in ./linux-3.16.3/include/linux: drbd_limits.h
Only in ./linux-3.16.3/include/linux: ds1286.h
Only in ./linux-3.16.3/include/linux: ds17287rtc.h
Only in ./linux-3.16.3/include/linux: ds2782_battery.h
Only in ./linux-3.16.3/include/linux: dtlk.h
Only in ./linux-3.16.3/include/linux: dw_apb_timer.h
Only in ./linux-3.16.3/include/linux: dw_dmac.h
Only in ./linux-3.16.3/include/linux: dynamic_debug.h
Only in ./linux-3.16.3/include/linux: dynamic_queue_limits.h
Only in ./linux-3.16.3/include/linux: earlycpio.h
Only in ./linux-3.16.3/include/linux: ecryptfs.h
Only in ./linux-3.16.3/include/linux: edac.h
Only in ./linux-3.16.3/include/linux: edd.h
Only in ./linux-3.16.3/include/linux: edma.h
Only in ./linux-3.16.3/include/linux: eeprom_93cx6.h
Only in ./linux-3.16.3/include/linux: eeprom_93xx46.h
Only in ./linux-3.16.3/include/linux: efi-bgrt.h
Only in ./linux-3.16.3/include/linux: efi.h
Only in ./linux-3.16.3/include/linux: efs_vh.h
Only in ./linux-3.16.3/include/linux: eisa.h
Only in ./linux-3.16.3/include/linux: elevator.h
Only in ./linux-3.16.3/include/linux: elfcore-compat.h
Only in ./linux-3.16.3/include/linux: elfcore.h
Only in ./linux-3.16.3/include/linux: elf-fdpic.h
Only in ./linux-3.16.3/include/linux: elf.h
Only in ./linux-3.16.3/include/linux: elfnote.h
Only in ./linux-3.16.3/include/linux: enclosure.h
Only in ./linux-3.16.3/include/linux: err.h
Only in ./linux-3.16.3/include/linux: errno.h
Only in ./linux-3.16.3/include/linux: errqueue.h
Only in ./linux-3.16.3/include/linux: etherdevice.h
Only in ./linux-3.16.3/include/linux: ethtool.h
Only in ./linux-3.16.3/include/linux: eventfd.h
Only in ./linux-3.16.3/include/linux: eventpoll.h
Only in ./linux-3.16.3/include/linux: evm.h
Only in ./linux-3.16.3/include/linux: exportfs.h
Only in ./linux-3.16.3/include/linux: export.h
Only in ./linux-3.16.3/include/linux: ext2_fs.h
Only in ./linux-3.16.3/include/linux: extcon
Only in ./linux-3.16.3/include/linux: extcon.h
Only in ./linux-3.16.3/include/linux: f2fs_fs.h
Only in ./linux-3.16.3/include/linux: f75375s.h
Only in ./linux-3.16.3/include/linux: falloc.h
Only in ./linux-3.16.3/include/linux: fanotify.h
Only in ./linux-3.16.3/include/linux: fault-inject.h
Only in ./linux-3.16.3/include/linux: fb.h
Only in ./linux-3.16.3/include/linux: fcdevice.h
Only in ./linux-3.16.3/include/linux: fcntl.h
Only in ./linux-3.16.3/include/linux: fddidevice.h
Only in ./linux-3.16.3/include/linux: fd.h
Only in ./linux-3.16.3/include/linux: fdtable.h
Only in ./linux-3.16.3/include/linux: fec.h
Only in ./linux-3.16.3/include/linux: file.h
Only in ./linux-3.16.3/include/linux: filter.h
Only in ./linux-3.16.3/include/linux: fips.h
Only in ./linux-3.16.3/include/linux: firewire.h
Only in ./linux-3.16.3/include/linux: firmware.h
Only in ./linux-3.16.3/include/linux: firmware-map.h
Only in ./linux-3.16.3/include/linux: fixp-arith.h
Only in ./linux-3.16.3/include/linux: flat.h
Only in ./linux-3.16.3/include/linux: flex_array.h
Only in ./linux-3.16.3/include/linux: flex_proportions.h
Only in ./linux-3.16.3/include/linux: fmc.h
Only in ./linux-3.16.3/include/linux: fmc-sdb.h
Only in ./linux-3.16.3/include/linux: font.h
Only in ./linux-3.16.3/include/linux: freezer.h
Only in ./linux-3.16.3/include/linux: frontswap.h
Only in ./linux-3.16.3/include/linux: fscache-cache.h
Only in ./linux-3.16.3/include/linux: fscache.h
Only in ./linux-3.16.3/include/linux: fs_enet_pd.h
Only in ./linux-3.16.3/include/linux: fs.h
Only in ./linux-3.16.3/include/linux: fsl
Only in ./linux-3.16.3/include/linux: fsl_devices.h
Only in ./linux-3.16.3/include/linux: fsl-diu-fb.h
Only in ./linux-3.16.3/include/linux: fsl_hypervisor.h
Only in ./linux-3.16.3/include/linux: fsl_ifc.h
Only in ./linux-3.16.3/include/linux: fsnotify_backend.h
Only in ./linux-3.16.3/include/linux: fsnotify.h
Only in ./linux-3.16.3/include/linux: fs_stack.h
Only in ./linux-3.16.3/include/linux: fs_struct.h
Only in ./linux-3.16.3/include/linux: fs_uart_pd.h
Only in ./linux-3.16.3/include/linux: ftrace_event.h
Only in ./linux-3.16.3/include/linux: ftrace.h
Only in ./linux-3.16.3/include/linux: ftrace_irq.h
Only in ./linux-3.16.3/include/linux: futex.h
Only in ./linux-3.16.3/include/linux: gameport.h
Only in ./linux-3.16.3/include/linux: gcd.h
Only in ./linux-3.16.3/include/linux: genalloc.h
Only in ./linux-3.16.3/include/linux: genetlink.h
Only in ./linux-3.16.3/include/linux: genhd.h
Only in ./linux-3.16.3/include/linux: genl_magic_func.h
Only in ./linux-3.16.3/include/linux: genl_magic_struct.h
Only in ./linux-3.16.3/include/linux: getcpu.h
Only in ./linux-3.16.3/include/linux: gfp.h
Only in ./linux-3.16.3/include/linux: goldfish.h
Only in ./linux-3.16.3/include/linux: gpio
Only in ./linux-3.16.3/include/linux: gpio-fan.h
Only in ./linux-3.16.3/include/linux: gpio.h
Only in ./linux-3.16.3/include/linux: gpio_keys.h
Only in ./linux-3.16.3/include/linux: gpio_mouse.h
Only in ./linux-3.16.3/include/linux: gpio-pxa.h
Only in ./linux-3.16.3/include/linux: gsmmux.h
Only in ./linux-3.16.3/include/linux: hardirq.h
Only in ./linux-3.16.3/include/linux: hash.h
Only in ./linux-3.16.3/include/linux: hashtable.h
Only in ./linux-3.16.3/include/linux: hdlcdrv.h
Only in ./linux-3.16.3/include/linux: hdlc.h
Only in ./linux-3.16.3/include/linux: hdmi.h
Only in ./linux-3.16.3/include/linux: hid-debug.h
Only in ./linux-3.16.3/include/linux: hiddev.h
Only in ./linux-3.16.3/include/linux: hid.h
Only in ./linux-3.16.3/include/linux: hidraw.h
Only in ./linux-3.16.3/include/linux: hid-roccat.h
Only in ./linux-3.16.3/include/linux: hid-sensor-hub.h
Only in ./linux-3.16.3/include/linux: hid-sensor-ids.h
Only in ./linux-3.16.3/include/linux: highmem.h
Only in ./linux-3.16.3/include/linux: highuid.h
Only in ./linux-3.16.3/include/linux: hil.h
Only in ./linux-3.16.3/include/linux: hil_mlc.h
Only in ./linux-3.16.3/include/linux: hippidevice.h
Only in ./linux-3.16.3/include/linux: host1x.h
Only in ./linux-3.16.3/include/linux: hpet.h
Only in ./linux-3.16.3/include/linux: hp_sdc.h
Only in ./linux-3.16.3/include/linux: hrtimer.h
Only in ./linux-3.16.3/include/linux: hsi
Only in ./linux-3.16.3/include/linux: htcpld.h
Only in ./linux-3.16.3/include/linux: htirq.h
Only in ./linux-3.16.3/include/linux: huge_mm.h
Only in ./linux-3.16.3/include/linux: hugetlb_cgroup.h
Only in ./linux-3.16.3/include/linux: hugetlb.h
Only in ./linux-3.16.3/include/linux: hugetlb_inline.h
Only in ./linux-3.16.3/include/linux: hw_breakpoint.h
Only in ./linux-3.16.3/include/linux: hwmon.h
Only in ./linux-3.16.3/include/linux: hwmon-sysfs.h
Only in ./linux-3.16.3/include/linux: hwmon-vid.h
Only in ./linux-3.16.3/include/linux: hw_random.h
Only in ./linux-3.16.3/include/linux: hwspinlock.h
Only in ./linux-3.16.3/include/linux: hyperv.h
Only in ./linux-3.16.3/include/linux: i2c
Only in ./linux-3.16.3/include/linux: i2c-algo-bit.h
Only in ./linux-3.16.3/include/linux: i2c-algo-pca.h
Only in ./linux-3.16.3/include/linux: i2c-algo-pcf.h
Only in ./linux-3.16.3/include/linux: i2c-dev.h
Only in ./linux-3.16.3/include/linux: i2c-gpio.h
Only in ./linux-3.16.3/include/linux: i2c.h
Only in ./linux-3.16.3/include/linux: i2c-mux-gpio.h
Only in ./linux-3.16.3/include/linux: i2c-mux.h
Only in ./linux-3.16.3/include/linux: i2c-mux-pinctrl.h
Only in ./linux-3.16.3/include/linux: i2c-ocores.h
Only in ./linux-3.16.3/include/linux: i2c-omap.h
Only in ./linux-3.16.3/include/linux: i2c-pca-platform.h
Only in ./linux-3.16.3/include/linux: i2c-pnx.h
Only in ./linux-3.16.3/include/linux: i2c-pxa.h
Only in ./linux-3.16.3/include/linux: i2c-smbus.h
Only in ./linux-3.16.3/include/linux: i2c-xiic.h
Only in ./linux-3.16.3/include/linux: i2o.h
Only in ./linux-3.16.3/include/linux: i7300_idle.h
Only in ./linux-3.16.3/include/linux: i8042.h
Only in ./linux-3.16.3/include/linux: i8253.h
Only in ./linux-3.16.3/include/linux: i82593.h
Only in ./linux-3.16.3/include/linux: icmp.h
Only in ./linux-3.16.3/include/linux: icmpv6.h
Only in ./linux-3.16.3/include/linux: ide.h
Only in ./linux-3.16.3/include/linux: idr.h
Only in ./linux-3.16.3/include/linux: ieee80211.h
Only in ./linux-3.16.3/include/linux: if_arp.h
Only in ./linux-3.16.3/include/linux: if_bridge.h
Only in ./linux-3.16.3/include/linux: if_eql.h
Only in ./linux-3.16.3/include/linux: if_ether.h
Only in ./linux-3.16.3/include/linux: if_fddi.h
Only in ./linux-3.16.3/include/linux: if_frad.h
Only in ./linux-3.16.3/include/linux: if_link.h
Only in ./linux-3.16.3/include/linux: if_ltalk.h
Only in ./linux-3.16.3/include/linux: if_macvlan.h
Only in ./linux-3.16.3/include/linux: if_phonet.h
Only in ./linux-3.16.3/include/linux: if_pppol2tp.h
Only in ./linux-3.16.3/include/linux: if_pppox.h
Only in ./linux-3.16.3/include/linux: if_team.h
Only in ./linux-3.16.3/include/linux: if_tun.h
Only in ./linux-3.16.3/include/linux: if_tunnel.h
Only in ./linux-3.16.3/include/linux: if_vlan.h
Only in ./linux-3.16.3/include/linux: igmp.h
Only in ./linux-3.16.3/include/linux: ihex.h
Only in ./linux-3.16.3/include/linux: iio
Only in ./linux-3.16.3/include/linux: ima.h
Only in ./linux-3.16.3/include/linux: in6.h
Only in ./linux-3.16.3/include/linux: inetdevice.h
Only in ./linux-3.16.3/include/linux: inet_diag.h
Only in ./linux-3.16.3/include/linux: inet.h
Only in ./linux-3.16.3/include/linux: inet_lro.h
Only in ./linux-3.16.3/include/linux: in.h
Only in ./linux-3.16.3/include/linux: init.h
Only in ./linux-3.16.3/include/linux: init_ohci1394_dma.h
Only in ./linux-3.16.3/include/linux: initrd.h
diff -rup ./linux-3.16.3/include/linux/init_task.h ./vt_mininet/kernel_changes/include/linux/init_task.h
--- ./linux-3.16.3/include/linux/init_task.h	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/include/linux/init_task.h	2019-03-13 16:02:50.804501956 +0800
@@ -195,7 +195,14 @@ extern struct task_group root_task_group
 	.ptraced	= LIST_HEAD_INIT(tsk.ptraced),			\
 	.ptrace_entry	= LIST_HEAD_INIT(tsk.ptrace_entry),		\
 	.real_parent	= &tsk,						\
-	.parent		= &tsk,						\
+    .virtual_start_time = 0,                    \
+    .physical_past_time = 0,                    \
+    .virtual_past_time = 0,                     \
+    .dilation = 0,                              \
+    .virtual_start_nsec = 0,                    \
+    .physical_past_nsec = 0,                    \
+    .virtual_past_nsec = 0,                     \
+    .parent		= &tsk,						\
 	.children	= LIST_HEAD_INIT(tsk.children),			\
 	.sibling	= LIST_HEAD_INIT(tsk.sibling),			\
 	.group_leader	= &tsk,						\
Only in ./linux-3.16.3/include/linux: inotify.h
Only in ./linux-3.16.3/include/linux: input
Only in ./linux-3.16.3/include/linux: input.h
Only in ./linux-3.16.3/include/linux: input-polldev.h
Only in ./linux-3.16.3/include/linux: integrity.h
Only in ./linux-3.16.3/include/linux: intel-iommu.h
Only in ./linux-3.16.3/include/linux: intel_mid_dma.h
Only in ./linux-3.16.3/include/linux: intel_pmic_gpio.h
Only in ./linux-3.16.3/include/linux: interrupt.h
Only in ./linux-3.16.3/include/linux: interval_tree_generic.h
Only in ./linux-3.16.3/include/linux: interval_tree.h
Only in ./linux-3.16.3/include/linux: ioc3.h
Only in ./linux-3.16.3/include/linux: ioc4.h
Only in ./linux-3.16.3/include/linux: iocontext.h
Only in ./linux-3.16.3/include/linux: io.h
Only in ./linux-3.16.3/include/linux: io-mapping.h
Only in ./linux-3.16.3/include/linux: iommu.h
Only in ./linux-3.16.3/include/linux: iommu-helper.h
Only in ./linux-3.16.3/include/linux: ioport.h
Only in ./linux-3.16.3/include/linux: ioprio.h
Only in ./linux-3.16.3/include/linux: iova.h
Only in ./linux-3.16.3/include/linux: ipack.h
Only in ./linux-3.16.3/include/linux: ipc.h
Only in ./linux-3.16.3/include/linux: ipc_namespace.h
Only in ./linux-3.16.3/include/linux: ip.h
Only in ./linux-3.16.3/include/linux: ipmi-fru.h
Only in ./linux-3.16.3/include/linux: ipmi.h
Only in ./linux-3.16.3/include/linux: ipmi_smi.h
Only in ./linux-3.16.3/include/linux: ipv6.h
Only in ./linux-3.16.3/include/linux: ipv6_route.h
Only in ./linux-3.16.3/include/linux: irqchip
Only in ./linux-3.16.3/include/linux: irqchip.h
Only in ./linux-3.16.3/include/linux: irq_cpustat.h
Only in ./linux-3.16.3/include/linux: irqdesc.h
Only in ./linux-3.16.3/include/linux: irqdomain.h
Only in ./linux-3.16.3/include/linux: irqflags.h
Only in ./linux-3.16.3/include/linux: irq.h
Only in ./linux-3.16.3/include/linux: irqnr.h
Only in ./linux-3.16.3/include/linux: irqreturn.h
Only in ./linux-3.16.3/include/linux: irq_work.h
Only in ./linux-3.16.3/include/linux: isa.h
Only in ./linux-3.16.3/include/linux: isapnp.h
Only in ./linux-3.16.3/include/linux: iscsi_boot_sysfs.h
Only in ./linux-3.16.3/include/linux: iscsi_ibft.h
Only in ./linux-3.16.3/include/linux: isdn
Only in ./linux-3.16.3/include/linux: isdn_divertif.h
Only in ./linux-3.16.3/include/linux: isdn.h
Only in ./linux-3.16.3/include/linux: isdnif.h
Only in ./linux-3.16.3/include/linux: isdn_ppp.h
Only in ./linux-3.16.3/include/linux: isicom.h
Only in ./linux-3.16.3/include/linux: jbd2.h
Only in ./linux-3.16.3/include/linux: jbd_common.h
Only in ./linux-3.16.3/include/linux: jbd.h
Only in ./linux-3.16.3/include/linux: jhash.h
Only in ./linux-3.16.3/include/linux: jiffies.h
Only in ./linux-3.16.3/include/linux: journal-head.h
Only in ./linux-3.16.3/include/linux: joystick.h
Only in ./linux-3.16.3/include/linux: jump_label.h
Only in ./linux-3.16.3/include/linux: jump_label_ratelimit.h
Only in ./linux-3.16.3/include/linux: jz4740-adc.h
Only in ./linux-3.16.3/include/linux: kallsyms.h
Only in ./linux-3.16.3/include/linux: kbd_diacr.h
Only in ./linux-3.16.3/include/linux: kbd_kern.h
Only in ./linux-3.16.3/include/linux: kbuild.h
Only in ./linux-3.16.3/include/linux: kcmp.h
Only in ./linux-3.16.3/include/linux: kconfig.h
Only in ./linux-3.16.3/include/linux: kcore.h
Only in ./linux-3.16.3/include/linux: kdb.h
Only in ./linux-3.16.3/include/linux: kdebug.h
Only in ./linux-3.16.3/include/linux: kdev_t.h
Only in ./linux-3.16.3/include/linux: kd.h
Only in ./linux-3.16.3/include/linux: kernelcapi.h
Only in ./linux-3.16.3/include/linux: kernel.h
Only in ./linux-3.16.3/include/linux: kernel-page-flags.h
Only in ./linux-3.16.3/include/linux: kernel_stat.h
Only in ./linux-3.16.3/include/linux: kernfs.h
Only in ./linux-3.16.3/include/linux: kern_levels.h
Only in ./linux-3.16.3/include/linux: kexec.h
Only in ./linux-3.16.3/include/linux: keyboard.h
Only in ./linux-3.16.3/include/linux: key.h
Only in ./linux-3.16.3/include/linux: key-type.h
Only in ./linux-3.16.3/include/linux: kfifo.h
Only in ./linux-3.16.3/include/linux: kgdb.h
Only in ./linux-3.16.3/include/linux: khugepaged.h
Only in ./linux-3.16.3/include/linux: klist.h
Only in ./linux-3.16.3/include/linux: kmemcheck.h
Only in ./linux-3.16.3/include/linux: kmemleak.h
Only in ./linux-3.16.3/include/linux: kmod.h
Only in ./linux-3.16.3/include/linux: kmsg_dump.h
Only in ./linux-3.16.3/include/linux: kobject.h
Only in ./linux-3.16.3/include/linux: kobject_ns.h
Only in ./linux-3.16.3/include/linux: kobj_map.h
Only in ./linux-3.16.3/include/linux: kprobes.h
Only in ./linux-3.16.3/include/linux: kref.h
Only in ./linux-3.16.3/include/linux: ks0108.h
Only in ./linux-3.16.3/include/linux: ks8842.h
Only in ./linux-3.16.3/include/linux: ks8851_mll.h
Only in ./linux-3.16.3/include/linux: ksm.h
Only in ./linux-3.16.3/include/linux: kthread.h
Only in ./linux-3.16.3/include/linux: ktime.h
Only in ./linux-3.16.3/include/linux: kvm_host.h
Only in ./linux-3.16.3/include/linux: kvm_para.h
Only in ./linux-3.16.3/include/linux: kvm_types.h
Only in ./linux-3.16.3/include/linux: l2tp.h
Only in ./linux-3.16.3/include/linux: lapb.h
Only in ./linux-3.16.3/include/linux: latencytop.h
Only in ./linux-3.16.3/include/linux: lcd.h
Only in ./linux-3.16.3/include/linux: lcm.h
Only in ./linux-3.16.3/include/linux: led-lm3530.h
Only in ./linux-3.16.3/include/linux: leds-bd2802.h
Only in ./linux-3.16.3/include/linux: leds.h
Only in ./linux-3.16.3/include/linux: leds-lp3944.h
Only in ./linux-3.16.3/include/linux: leds-pca9532.h
Only in ./linux-3.16.3/include/linux: leds_pwm.h
Only in ./linux-3.16.3/include/linux: leds-regulator.h
Only in ./linux-3.16.3/include/linux: leds-tca6507.h
Only in ./linux-3.16.3/include/linux: lglock.h
Only in ./linux-3.16.3/include/linux: lguest.h
Only in ./linux-3.16.3/include/linux: lguest_launcher.h
Only in ./linux-3.16.3/include/linux: libata.h
Only in ./linux-3.16.3/include/linux: libfdt_env.h
Only in ./linux-3.16.3/include/linux: libfdt.h
Only in ./linux-3.16.3/include/linux: libps2.h
Only in ./linux-3.16.3/include/linux: license.h
Only in ./linux-3.16.3/include/linux: linkage.h
Only in ./linux-3.16.3/include/linux: linux_logo.h
Only in ./linux-3.16.3/include/linux: lis3lv02d.h
Only in ./linux-3.16.3/include/linux: list_bl.h
Only in ./linux-3.16.3/include/linux: list.h
Only in ./linux-3.16.3/include/linux: list_lru.h
Only in ./linux-3.16.3/include/linux: list_nulls.h
Only in ./linux-3.16.3/include/linux: list_sort.h
Only in ./linux-3.16.3/include/linux: llc.h
Only in ./linux-3.16.3/include/linux: llist.h
Only in ./linux-3.16.3/include/linux: lockd
Only in ./linux-3.16.3/include/linux: lockdep.h
Only in ./linux-3.16.3/include/linux: lockref.h
Only in ./linux-3.16.3/include/linux: log2.h
Only in ./linux-3.16.3/include/linux: lp.h
Only in ./linux-3.16.3/include/linux: lru_cache.h
Only in ./linux-3.16.3/include/linux: lsm_audit.h
Only in ./linux-3.16.3/include/linux: lz4.h
Only in ./linux-3.16.3/include/linux: lzo.h
Only in ./linux-3.16.3/include/linux: m48t86.h
Only in ./linux-3.16.3/include/linux: mailbox.h
Only in ./linux-3.16.3/include/linux: maple.h
Only in ./linux-3.16.3/include/linux: marvell_phy.h
Only in ./linux-3.16.3/include/linux: math64.h
Only in ./linux-3.16.3/include/linux: max17040_battery.h
Only in ./linux-3.16.3/include/linux: mbcache.h
Only in ./linux-3.16.3/include/linux: mbus.h
Only in ./linux-3.16.3/include/linux: mc146818rtc.h
Only in ./linux-3.16.3/include/linux: mc6821.h
Only in ./linux-3.16.3/include/linux: mcb.h
Only in ./linux-3.16.3/include/linux: mdio-bitbang.h
Only in ./linux-3.16.3/include/linux: mdio-gpio.h
Only in ./linux-3.16.3/include/linux: mdio.h
Only in ./linux-3.16.3/include/linux: mdio-mux.h
Only in ./linux-3.16.3/include/linux: mei_cl_bus.h
Only in ./linux-3.16.3/include/linux: memblock.h
Only in ./linux-3.16.3/include/linux: memcontrol.h
Only in ./linux-3.16.3/include/linux: memory.h
Only in ./linux-3.16.3/include/linux: memory_hotplug.h
Only in ./linux-3.16.3/include/linux: mempolicy.h
Only in ./linux-3.16.3/include/linux: mempool.h
Only in ./linux-3.16.3/include/linux: memstick.h
Only in ./linux-3.16.3/include/linux: mfd
Only in ./linux-3.16.3/include/linux: mg_disk.h
Only in ./linux-3.16.3/include/linux: micrel_phy.h
Only in ./linux-3.16.3/include/linux: migrate.h
Only in ./linux-3.16.3/include/linux: migrate_mode.h
Only in ./linux-3.16.3/include/linux: mii.h
Only in ./linux-3.16.3/include/linux: miscdevice.h
Only in ./linux-3.16.3/include/linux: mISDNdsp.h
Only in ./linux-3.16.3/include/linux: mISDNhw.h
Only in ./linux-3.16.3/include/linux: mISDNif.h
Only in ./linux-3.16.3/include/linux: mlx4
Only in ./linux-3.16.3/include/linux: mlx5
Only in ./linux-3.16.3/include/linux: mman.h
Only in ./linux-3.16.3/include/linux: mmc
Only in ./linux-3.16.3/include/linux: mmdebug.h
Only in ./linux-3.16.3/include/linux: mm.h
Only in ./linux-3.16.3/include/linux: mm_inline.h
Only in ./linux-3.16.3/include/linux: mmiotrace.h
Only in ./linux-3.16.3/include/linux: mm_types.h
Only in ./linux-3.16.3/include/linux: mmu_context.h
Only in ./linux-3.16.3/include/linux: mmu_notifier.h
Only in ./linux-3.16.3/include/linux: mmzone.h
Only in ./linux-3.16.3/include/linux: mnt_namespace.h
Only in ./linux-3.16.3/include/linux: mod_devicetable.h
Only in ./linux-3.16.3/include/linux: module.h
Only in ./linux-3.16.3/include/linux: moduleloader.h
Only in ./linux-3.16.3/include/linux: moduleparam.h
Only in ./linux-3.16.3/include/linux: mount.h
Only in ./linux-3.16.3/include/linux: mpage.h
Only in ./linux-3.16.3/include/linux: mpi.h
Only in ./linux-3.16.3/include/linux: mpls.h
Only in ./linux-3.16.3/include/linux: mroute6.h
Only in ./linux-3.16.3/include/linux: mroute.h
Only in ./linux-3.16.3/include/linux: msdos_fs.h
Only in ./linux-3.16.3/include/linux: msg.h
Only in ./linux-3.16.3/include/linux: msi.h
Only in ./linux-3.16.3/include/linux: msm_mdp.h
Only in ./linux-3.16.3/include/linux: mtd
Only in ./linux-3.16.3/include/linux: mutex-debug.h
Only in ./linux-3.16.3/include/linux: mutex.h
Only in ./linux-3.16.3/include/linux: mv643xx_eth.h
Only in ./linux-3.16.3/include/linux: mv643xx.h
Only in ./linux-3.16.3/include/linux: mv643xx_i2c.h
Only in ./linux-3.16.3/include/linux: mxm-wmi.h
Only in ./linux-3.16.3/include/linux: namei.h
Only in ./linux-3.16.3/include/linux: nbd.h
Only in ./linux-3.16.3/include/linux: netdev_features.h
Only in ./linux-3.16.3/include/linux: netdevice.h
Only in ./linux-3.16.3/include/linux: netfilter
Only in ./linux-3.16.3/include/linux: netfilter_arp
Only in ./linux-3.16.3/include/linux: netfilter_bridge
Only in ./linux-3.16.3/include/linux: netfilter_bridge.h
Only in ./linux-3.16.3/include/linux: netfilter.h
Only in ./linux-3.16.3/include/linux: netfilter_ipv4
Only in ./linux-3.16.3/include/linux: netfilter_ipv4.h
Only in ./linux-3.16.3/include/linux: netfilter_ipv6
Only in ./linux-3.16.3/include/linux: netfilter_ipv6.h
Only in ./linux-3.16.3/include/linux: net.h
Only in ./linux-3.16.3/include/linux: netlink.h
Only in ./linux-3.16.3/include/linux: netpoll.h
Only in ./linux-3.16.3/include/linux: nfs3.h
Only in ./linux-3.16.3/include/linux: nfs4.h
Only in ./linux-3.16.3/include/linux: nfsacl.h
Only in ./linux-3.16.3/include/linux: nfs_fs.h
Only in ./linux-3.16.3/include/linux: nfs_fs_i.h
Only in ./linux-3.16.3/include/linux: nfs_fs_sb.h
Only in ./linux-3.16.3/include/linux: nfs.h
Only in ./linux-3.16.3/include/linux: nfs_idmap.h
Only in ./linux-3.16.3/include/linux: nfs_iostat.h
Only in ./linux-3.16.3/include/linux: nfs_page.h
Only in ./linux-3.16.3/include/linux: nfs_xdr.h
Only in ./linux-3.16.3/include/linux: nilfs2_fs.h
Only in ./linux-3.16.3/include/linux: nl802154.h
Only in ./linux-3.16.3/include/linux: nls.h
Only in ./linux-3.16.3/include/linux: nmi.h
Only in ./linux-3.16.3/include/linux: node.h
Only in ./linux-3.16.3/include/linux: nodemask.h
Only in ./linux-3.16.3/include/linux: notifier.h
Only in ./linux-3.16.3/include/linux: n_r3964.h
Only in ./linux-3.16.3/include/linux: nsc_gpio.h
Only in ./linux-3.16.3/include/linux: nsproxy.h
Only in ./linux-3.16.3/include/linux: ntb.h
Only in ./linux-3.16.3/include/linux: nubus.h
Only in ./linux-3.16.3/include/linux: numa.h
Only in ./linux-3.16.3/include/linux: nvme.h
Only in ./linux-3.16.3/include/linux: nvram.h
Only in ./linux-3.16.3/include/linux: nwpserial.h
Only in ./linux-3.16.3/include/linux: nx842.h
Only in ./linux-3.16.3/include/linux: of_address.h
Only in ./linux-3.16.3/include/linux: of_device.h
Only in ./linux-3.16.3/include/linux: of_dma.h
Only in ./linux-3.16.3/include/linux: of_fdt.h
Only in ./linux-3.16.3/include/linux: of_gpio.h
Only in ./linux-3.16.3/include/linux: of_graph.h
Only in ./linux-3.16.3/include/linux: of.h
Only in ./linux-3.16.3/include/linux: of_iommu.h
Only in ./linux-3.16.3/include/linux: of_irq.h
Only in ./linux-3.16.3/include/linux: of_mdio.h
Only in ./linux-3.16.3/include/linux: of_mtd.h
Only in ./linux-3.16.3/include/linux: of_net.h
Only in ./linux-3.16.3/include/linux: of_pci.h
Only in ./linux-3.16.3/include/linux: of_pdt.h
Only in ./linux-3.16.3/include/linux: of_platform.h
Only in ./linux-3.16.3/include/linux: of_reserved_mem.h
Only in ./linux-3.16.3/include/linux: oid_registry.h
Only in ./linux-3.16.3/include/linux: olpc-ec.h
Only in ./linux-3.16.3/include/linux: omap-dmaengine.h
Only in ./linux-3.16.3/include/linux: omap-dma.h
Only in ./linux-3.16.3/include/linux: omapfb.h
Only in ./linux-3.16.3/include/linux: omap-iommu.h
Only in ./linux-3.16.3/include/linux: omap-mailbox.h
Only in ./linux-3.16.3/include/linux: oom.h
Only in ./linux-3.16.3/include/linux: openvswitch.h
Only in ./linux-3.16.3/include/linux: oprofile.h
Only in ./linux-3.16.3/include/linux: osq_lock.h
Only in ./linux-3.16.3/include/linux: oxu210hp.h
Only in ./linux-3.16.3/include/linux: padata.h
Only in ./linux-3.16.3/include/linux: pageblock-flags.h
Only in ./linux-3.16.3/include/linux: page_cgroup.h
Only in ./linux-3.16.3/include/linux: page-debug-flags.h
Only in ./linux-3.16.3/include/linux: page-flags.h
Only in ./linux-3.16.3/include/linux: page-flags-layout.h
Only in ./linux-3.16.3/include/linux: page-isolation.h
Only in ./linux-3.16.3/include/linux: pagemap.h
Only in ./linux-3.16.3/include/linux: pagevec.h
Only in ./linux-3.16.3/include/linux: parport.h
Only in ./linux-3.16.3/include/linux: parport_pc.h
Only in ./linux-3.16.3/include/linux: parser.h
Only in ./linux-3.16.3/include/linux: pata_arasan_cf_data.h
Only in ./linux-3.16.3/include/linux: patchkey.h
Only in ./linux-3.16.3/include/linux: path.h
Only in ./linux-3.16.3/include/linux: pch_dma.h
Only in ./linux-3.16.3/include/linux: pci-acpi.h
Only in ./linux-3.16.3/include/linux: pci-aspm.h
Only in ./linux-3.16.3/include/linux: pci-ats.h
Only in ./linux-3.16.3/include/linux: pci-dma.h
Only in ./linux-3.16.3/include/linux: pcieport_if.h
Only in ./linux-3.16.3/include/linux: pci.h
Only in ./linux-3.16.3/include/linux: pci_hotplug.h
Only in ./linux-3.16.3/include/linux: pci_ids.h
Only in ./linux-3.16.3/include/linux: pda_power.h
Only in ./linux-3.16.3/include/linux: percpu_counter.h
Only in ./linux-3.16.3/include/linux: percpu-defs.h
Only in ./linux-3.16.3/include/linux: percpu.h
Only in ./linux-3.16.3/include/linux: percpu_ida.h
Only in ./linux-3.16.3/include/linux: percpu-refcount.h
Only in ./linux-3.16.3/include/linux: percpu-rwsem.h
Only in ./linux-3.16.3/include/linux: perf_event.h
Only in ./linux-3.16.3/include/linux: perf_regs.h
Only in ./linux-3.16.3/include/linux: personality.h
Only in ./linux-3.16.3/include/linux: pfn.h
Only in ./linux-3.16.3/include/linux: phonedev.h
Only in ./linux-3.16.3/include/linux: phonet.h
Only in ./linux-3.16.3/include/linux: phy
Only in ./linux-3.16.3/include/linux: phy_fixed.h
Only in ./linux-3.16.3/include/linux: phy.h
Only in ./linux-3.16.3/include/linux: pid.h
Only in ./linux-3.16.3/include/linux: pid_namespace.h
Only in ./linux-3.16.3/include/linux: pim.h
Only in ./linux-3.16.3/include/linux: pinctrl
Only in ./linux-3.16.3/include/linux: pipe_fs_i.h
Only in ./linux-3.16.3/include/linux: pktcdvd.h
Only in ./linux-3.16.3/include/linux: platform_data
Only in ./linux-3.16.3/include/linux: platform_device.h
Only in ./linux-3.16.3/include/linux: plist.h
Only in ./linux-3.16.3/include/linux: pm2301_charger.h
Only in ./linux-3.16.3/include/linux: pm_clock.h
Only in ./linux-3.16.3/include/linux: pm_domain.h
Only in ./linux-3.16.3/include/linux: pm.h
Only in ./linux-3.16.3/include/linux: pm_opp.h
Only in ./linux-3.16.3/include/linux: pm_qos.h
Only in ./linux-3.16.3/include/linux: pm_runtime.h
Only in ./linux-3.16.3/include/linux: pmu.h
Only in ./linux-3.16.3/include/linux: pm_wakeup.h
Only in ./linux-3.16.3/include/linux: pnfs_osd_xdr.h
Only in ./linux-3.16.3/include/linux: pnp.h
Only in ./linux-3.16.3/include/linux: poison.h
Only in ./linux-3.16.3/include/linux: poll.h
Only in ./linux-3.16.3/include/linux: posix_acl.h
Only in ./linux-3.16.3/include/linux: posix_acl_xattr.h
Only in ./linux-3.16.3/include/linux: posix-clock.h
Only in ./linux-3.16.3/include/linux: posix-timers.h
Only in ./linux-3.16.3/include/linux: power
Only in ./linux-3.16.3/include/linux: powercap.h
Only in ./linux-3.16.3/include/linux: power_supply.h
Only in ./linux-3.16.3/include/linux: ppp_channel.h
Only in ./linux-3.16.3/include/linux: ppp-comp.h
Only in ./linux-3.16.3/include/linux: ppp_defs.h
Only in ./linux-3.16.3/include/linux: pps-gpio.h
Only in ./linux-3.16.3/include/linux: pps_kernel.h
Only in ./linux-3.16.3/include/linux: preempt.h
Only in ./linux-3.16.3/include/linux: preempt_mask.h
Only in ./linux-3.16.3/include/linux: prefetch.h
Only in ./linux-3.16.3/include/linux: printk.h
Only in ./linux-3.16.3/include/linux: prio_heap.h
Only in ./linux-3.16.3/include/linux: proc_fs.h
Only in ./linux-3.16.3/include/linux: proc_ns.h
Only in ./linux-3.16.3/include/linux: profile.h
Only in ./linux-3.16.3/include/linux: projid.h
Only in ./linux-3.16.3/include/linux: proportions.h
Only in ./linux-3.16.3/include/linux: pstore.h
Only in ./linux-3.16.3/include/linux: pstore_ram.h
Only in ./linux-3.16.3/include/linux: pti.h
Only in ./linux-3.16.3/include/linux: ptp_classify.h
Only in ./linux-3.16.3/include/linux: ptp_clock_kernel.h
Only in ./linux-3.16.3/include/linux: ptrace.h
Only in ./linux-3.16.3/include/linux: pvclock_gtod.h
Only in ./linux-3.16.3/include/linux: pwm_backlight.h
Only in ./linux-3.16.3/include/linux: pwm.h
Only in ./linux-3.16.3/include/linux: pxa168_eth.h
Only in ./linux-3.16.3/include/linux: pxa2xx_ssp.h
Only in ./linux-3.16.3/include/linux: qnx6_fs.h
Only in ./linux-3.16.3/include/linux: quicklist.h
Only in ./linux-3.16.3/include/linux: quota.h
Only in ./linux-3.16.3/include/linux: quotaops.h
Only in ./linux-3.16.3/include/linux: radix-tree.h
Only in ./linux-3.16.3/include/linux: raid
Only in ./linux-3.16.3/include/linux: raid_class.h
Only in ./linux-3.16.3/include/linux: ramfs.h
Only in ./linux-3.16.3/include/linux: random.h
Only in ./linux-3.16.3/include/linux: range.h
Only in ./linux-3.16.3/include/linux: ratelimit.h
Only in ./linux-3.16.3/include/linux: rational.h
Only in ./linux-3.16.3/include/linux: rbtree_augmented.h
Only in ./linux-3.16.3/include/linux: rbtree.h
Only in ./linux-3.16.3/include/linux: rculist_bl.h
Only in ./linux-3.16.3/include/linux: rculist.h
Only in ./linux-3.16.3/include/linux: rculist_nulls.h
Only in ./linux-3.16.3/include/linux: rcupdate.h
Only in ./linux-3.16.3/include/linux: rcutiny.h
Only in ./linux-3.16.3/include/linux: rcutree.h
Only in ./linux-3.16.3/include/linux: reboot.h
Only in ./linux-3.16.3/include/linux: reciprocal_div.h
Only in ./linux-3.16.3/include/linux: regmap.h
Only in ./linux-3.16.3/include/linux: regset.h
Only in ./linux-3.16.3/include/linux: regulator
Only in ./linux-3.16.3/include/linux: relay.h
Only in ./linux-3.16.3/include/linux: remoteproc.h
Only in ./linux-3.16.3/include/linux: res_counter.h
Only in ./linux-3.16.3/include/linux: reservation.h
Only in ./linux-3.16.3/include/linux: reset-controller.h
Only in ./linux-3.16.3/include/linux: reset.h
Only in ./linux-3.16.3/include/linux: resource.h
Only in ./linux-3.16.3/include/linux: resume-trace.h
Only in ./linux-3.16.3/include/linux: rfkill-gpio.h
Only in ./linux-3.16.3/include/linux: rfkill.h
Only in ./linux-3.16.3/include/linux: rfkill-regulator.h
Only in ./linux-3.16.3/include/linux: ring_buffer.h
Only in ./linux-3.16.3/include/linux: rio_drv.h
Only in ./linux-3.16.3/include/linux: rio.h
Only in ./linux-3.16.3/include/linux: rio_ids.h
Only in ./linux-3.16.3/include/linux: rio_regs.h
Only in ./linux-3.16.3/include/linux: rmap.h
Only in ./linux-3.16.3/include/linux: rndis.h
Only in ./linux-3.16.3/include/linux: root_dev.h
Only in ./linux-3.16.3/include/linux: rotary_encoder.h
Only in ./linux-3.16.3/include/linux: rpmsg.h
Only in ./linux-3.16.3/include/linux: rslib.h
Only in ./linux-3.16.3/include/linux: rtc
Only in ./linux-3.16.3/include/linux: rtc-ds2404.h
Only in ./linux-3.16.3/include/linux: rtc.h
Only in ./linux-3.16.3/include/linux: rtc-v3020.h
Only in ./linux-3.16.3/include/linux: rtmutex.h
Only in ./linux-3.16.3/include/linux: rtnetlink.h
Only in ./linux-3.16.3/include/linux: rwlock_api_smp.h
Only in ./linux-3.16.3/include/linux: rwlock.h
Only in ./linux-3.16.3/include/linux: rwlock_types.h
Only in ./linux-3.16.3/include/linux: rwsem.h
Only in ./linux-3.16.3/include/linux: rwsem-spinlock.h
Only in ./linux-3.16.3/include/linux: rxrpc.h
Only in ./linux-3.16.3/include/linux: s3c_adc_battery.h
Only in ./linux-3.16.3/include/linux: sa11x0-dma.h
Only in ./linux-3.16.3/include/linux: scatterlist.h
Only in ./linux-3.16.3/include/linux: scc.h
Only in ./linux-3.16.3/include/linux: sched
Only in ./linux-3.16.3/include/linux: sched_clock.h
diff -rup ./linux-3.16.3/include/linux/sched.h ./vt_mininet/kernel_changes/include/linux/sched.h
--- ./linux-3.16.3/include/linux/sched.h	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/include/linux/sched.h	2019-03-13 16:02:50.804501956 +0800
@@ -1406,6 +1406,16 @@ struct task_struct {
 	struct signal_struct *signal;
 	struct sighand_struct *sighand;
 
+    /* virtual time ---Jiaqi */
+    s64 virtual_start_time;
+    s64 physical_past_time;
+    s64 virtual_past_time;
+    int dilation;
+
+    s64 virtual_start_nsec;
+    s64 physical_past_nsec;
+    s64 virtual_past_nsec;
+
 	sigset_t blocked, real_blocked;
 	sigset_t saved_sigmask;	/* restored if set_restore_sigmask() was used */
 	struct sigpending pending;
Only in ./linux-3.16.3/include/linux: screen_info.h
Only in ./linux-3.16.3/include/linux: sctp.h
Only in ./linux-3.16.3/include/linux: scx200_gpio.h
Only in ./linux-3.16.3/include/linux: scx200.h
Only in ./linux-3.16.3/include/linux: sdb.h
Only in ./linux-3.16.3/include/linux: sdla.h
Only in ./linux-3.16.3/include/linux: seccomp.h
Only in ./linux-3.16.3/include/linux: securebits.h
Only in ./linux-3.16.3/include/linux: security.h
Only in ./linux-3.16.3/include/linux: selection.h
Only in ./linux-3.16.3/include/linux: selinux.h
Only in ./linux-3.16.3/include/linux: semaphore.h
Only in ./linux-3.16.3/include/linux: sem.h
Only in ./linux-3.16.3/include/linux: seq_file.h
Only in ./linux-3.16.3/include/linux: seq_file_net.h
Only in ./linux-3.16.3/include/linux: seqlock.h
Only in ./linux-3.16.3/include/linux: serial_8250.h
Only in ./linux-3.16.3/include/linux: serial_bcm63xx.h
Only in ./linux-3.16.3/include/linux: serial_core.h
Only in ./linux-3.16.3/include/linux: serial.h
Only in ./linux-3.16.3/include/linux: serial_max3100.h
Only in ./linux-3.16.3/include/linux: serial_mfd.h
Only in ./linux-3.16.3/include/linux: serial_pnx8xxx.h
Only in ./linux-3.16.3/include/linux: serial_s3c.h
Only in ./linux-3.16.3/include/linux: serial_sci.h
Only in ./linux-3.16.3/include/linux: serio.h
Only in ./linux-3.16.3/include/linux: sfi_acpi.h
Only in ./linux-3.16.3/include/linux: sfi.h
Only in ./linux-3.16.3/include/linux: sh_clk.h
Only in ./linux-3.16.3/include/linux: shdma-base.h
Only in ./linux-3.16.3/include/linux: sh_dma.h
Only in ./linux-3.16.3/include/linux: sh_eth.h
Only in ./linux-3.16.3/include/linux: sh_intc.h
Only in ./linux-3.16.3/include/linux: shmem_fs.h
Only in ./linux-3.16.3/include/linux: shm.h
Only in ./linux-3.16.3/include/linux: shrinker.h
Only in ./linux-3.16.3/include/linux: sh_timer.h
Only in ./linux-3.16.3/include/linux: signalfd.h
Only in ./linux-3.16.3/include/linux: signal.h
Only in ./linux-3.16.3/include/linux: sirfsoc_dma.h
Only in ./linux-3.16.3/include/linux: sizes.h
Only in ./linux-3.16.3/include/linux: skbuff.h
Only in ./linux-3.16.3/include/linux: slab_def.h
Only in ./linux-3.16.3/include/linux: slab.h
Only in ./linux-3.16.3/include/linux: slub_def.h
Only in ./linux-3.16.3/include/linux: sm501.h
Only in ./linux-3.16.3/include/linux: sm501-regs.h
Only in ./linux-3.16.3/include/linux: smc911x.h
Only in ./linux-3.16.3/include/linux: smc91x.h
Only in ./linux-3.16.3/include/linux: smpboot.h
Only in ./linux-3.16.3/include/linux: smp.h
Only in ./linux-3.16.3/include/linux: smsc911x.h
Only in ./linux-3.16.3/include/linux: smscphy.h
Only in ./linux-3.16.3/include/linux: sock_diag.h
Only in ./linux-3.16.3/include/linux: socket.h
Only in ./linux-3.16.3/include/linux: sonet.h
Only in ./linux-3.16.3/include/linux: sony-laptop.h
Only in ./linux-3.16.3/include/linux: sonypi.h
Only in ./linux-3.16.3/include/linux: sort.h
Only in ./linux-3.16.3/include/linux: soundcard.h
Only in ./linux-3.16.3/include/linux: sound.h
Only in ./linux-3.16.3/include/linux: spi
Only in ./linux-3.16.3/include/linux: spinlock_api_smp.h
Only in ./linux-3.16.3/include/linux: spinlock_api_up.h
Only in ./linux-3.16.3/include/linux: spinlock.h
Only in ./linux-3.16.3/include/linux: spinlock_types.h
Only in ./linux-3.16.3/include/linux: spinlock_types_up.h
Only in ./linux-3.16.3/include/linux: spinlock_up.h
Only in ./linux-3.16.3/include/linux: splice.h
Only in ./linux-3.16.3/include/linux: spmi.h
Only in ./linux-3.16.3/include/linux: srcu.h
Only in ./linux-3.16.3/include/linux: ssb
Only in ./linux-3.16.3/include/linux: ssbi.h
Only in ./linux-3.16.3/include/linux: stackprotector.h
Only in ./linux-3.16.3/include/linux: stacktrace.h
Only in ./linux-3.16.3/include/linux: start_kernel.h
Only in ./linux-3.16.3/include/linux: statfs.h
Only in ./linux-3.16.3/include/linux: stat.h
Only in ./linux-3.16.3/include/linux: static_key.h
Only in ./linux-3.16.3/include/linux: stddef.h
Only in ./linux-3.16.3/include/linux: ste_modem_shm.h
Only in ./linux-3.16.3/include/linux: stmmac.h
Only in ./linux-3.16.3/include/linux: stmp3xxx_rtc_wdt.h
Only in ./linux-3.16.3/include/linux: stmp_device.h
Only in ./linux-3.16.3/include/linux: stop_machine.h
Only in ./linux-3.16.3/include/linux: string.h
Only in ./linux-3.16.3/include/linux: string_helpers.h
Only in ./linux-3.16.3/include/linux: stringify.h
Only in ./linux-3.16.3/include/linux: sudmac.h
Only in ./linux-3.16.3/include/linux: sungem_phy.h
Only in ./linux-3.16.3/include/linux: sunrpc
Only in ./linux-3.16.3/include/linux: sunserialcore.h
Only in ./linux-3.16.3/include/linux: superhyway.h
Only in ./linux-3.16.3/include/linux: suspend.h
Only in ./linux-3.16.3/include/linux: svga.h
Only in ./linux-3.16.3/include/linux: swab.h
Only in ./linux-3.16.3/include/linux: swapfile.h
Only in ./linux-3.16.3/include/linux: swap.h
Only in ./linux-3.16.3/include/linux: swapops.h
Only in ./linux-3.16.3/include/linux: swiotlb.h
Only in ./linux-3.16.3/include/linux: sxgbe_platform.h
Only in ./linux-3.16.3/include/linux: synclink.h
diff -rup ./linux-3.16.3/include/linux/syscalls.h ./vt_mininet/kernel_changes/include/linux/syscalls.h
--- ./linux-3.16.3/include/linux/syscalls.h	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/include/linux/syscalls.h	2019-03-13 16:02:50.804501956 +0800
@@ -831,6 +831,14 @@ asmlinkage long sys_clone(unsigned long,
 #endif
 #endif
 
+/* virtual time --- Jiaqi*/
+// asmlinkage long sys_timeclone(unsigned long, unsigned long, int __user *, int, int __user *);
+asmlinkage long sys_virtualtimeunshare(unsigned long, unsigned long);
+asmlinkage long sys_getvirtualtimeofday(struct timeval __user *, struct timezone __user *);
+asmlinkage long sys_helloworld(void);
+asmlinkage long sys_settimedilationfactor(unsigned long, pid_t);
+
+
 asmlinkage long sys_execve(const char __user *filename,
 		const char __user *const __user *argv,
 		const char __user *const __user *envp);
Only in ./linux-3.16.3/include/linux: syscore_ops.h
Only in ./linux-3.16.3/include/linux: sysctl.h
Only in ./linux-3.16.3/include/linux: sysfs.h
Only in ./linux-3.16.3/include/linux: sys.h
Only in ./linux-3.16.3/include/linux: syslog.h
Only in ./linux-3.16.3/include/linux: sysrq.h
Only in ./linux-3.16.3/include/linux: sys_soc.h
Only in ./linux-3.16.3/include/linux: sysv_fs.h
Only in ./linux-3.16.3/include/linux: task_io_accounting.h
Only in ./linux-3.16.3/include/linux: task_io_accounting_ops.h
Only in ./linux-3.16.3/include/linux: taskstats_kern.h
Only in ./linux-3.16.3/include/linux: task_work.h
Only in ./linux-3.16.3/include/linux: tboot.h
Only in ./linux-3.16.3/include/linux: tca6416_keypad.h
Only in ./linux-3.16.3/include/linux: tc.h
Only in ./linux-3.16.3/include/linux: tcp.h
Only in ./linux-3.16.3/include/linux: tegra-ahb.h
Only in ./linux-3.16.3/include/linux: tegra-cpuidle.h
Only in ./linux-3.16.3/include/linux: tegra-powergate.h
Only in ./linux-3.16.3/include/linux: tegra-soc.h
Only in ./linux-3.16.3/include/linux: textsearch_fsm.h
Only in ./linux-3.16.3/include/linux: textsearch.h
Only in ./linux-3.16.3/include/linux: tfrc.h
Only in ./linux-3.16.3/include/linux: thermal.h
Only in ./linux-3.16.3/include/linux: thinkpad_acpi.h
Only in ./linux-3.16.3/include/linux: thread_info.h
Only in ./linux-3.16.3/include/linux: threads.h
Only in ./linux-3.16.3/include/linux: tick.h
Only in ./linux-3.16.3/include/linux: tifm.h
Only in ./linux-3.16.3/include/linux: timb_dma.h
Only in ./linux-3.16.3/include/linux: timb_gpio.h
Only in ./linux-3.16.3/include/linux: time.h
Only in ./linux-3.16.3/include/linux: timekeeper_internal.h
Only in ./linux-3.16.3/include/linux: timerfd.h
Only in ./linux-3.16.3/include/linux: timer.h
Only in ./linux-3.16.3/include/linux: timeriomem-rng.h
Only in ./linux-3.16.3/include/linux: timerqueue.h
Only in ./linux-3.16.3/include/linux: timex.h
Only in ./linux-3.16.3/include/linux: ti_wilink_st.h
Only in ./linux-3.16.3/include/linux: topology.h
Only in ./linux-3.16.3/include/linux: torture.h
Only in ./linux-3.16.3/include/linux: toshiba.h
Only in ./linux-3.16.3/include/linux: tpm_command.h
Only in ./linux-3.16.3/include/linux: tpm.h
Only in ./linux-3.16.3/include/linux: trace_clock.h
Only in ./linux-3.16.3/include/linux: tracehook.h
Only in ./linux-3.16.3/include/linux: tracepoint.h
Only in ./linux-3.16.3/include/linux: trace_seq.h
Only in ./linux-3.16.3/include/linux: transport_class.h
Only in ./linux-3.16.3/include/linux: tsacct_kern.h
Only in ./linux-3.16.3/include/linux: tty_driver.h
Only in ./linux-3.16.3/include/linux: tty_flip.h
Only in ./linux-3.16.3/include/linux: tty.h
Only in ./linux-3.16.3/include/linux: tty_ldisc.h
Only in ./linux-3.16.3/include/linux: typecheck.h
Only in ./linux-3.16.3/include/linux: types.h
Only in ./linux-3.16.3/include/linux: u64_stats_sync.h
Only in ./linux-3.16.3/include/linux: uaccess.h
Only in ./linux-3.16.3/include/linux: ucb1400.h
Only in ./linux-3.16.3/include/linux: ucs2_string.h
Only in ./linux-3.16.3/include/linux: udp.h
Only in ./linux-3.16.3/include/linux: uidgid.h
Only in ./linux-3.16.3/include/linux: uinput.h
Only in ./linux-3.16.3/include/linux: uio_driver.h
Only in ./linux-3.16.3/include/linux: uio.h
Only in ./linux-3.16.3/include/linux: unaligned
Only in ./linux-3.16.3/include/linux: uprobes.h
Only in ./linux-3.16.3/include/linux: usb
Only in ./linux-3.16.3/include/linux: usbdevice_fs.h
Only in ./linux-3.16.3/include/linux: usb.h
Only in ./linux-3.16.3/include/linux: usb_usual.h
Only in ./linux-3.16.3/include/linux: user.h
Only in ./linux-3.16.3/include/linux: user_namespace.h
Only in ./linux-3.16.3/include/linux: user-return-notifier.h
Only in ./linux-3.16.3/include/linux: uts.h
Only in ./linux-3.16.3/include/linux: utsname.h
Only in ./linux-3.16.3/include/linux: uuid.h
Only in ./linux-3.16.3/include/linux: uwb
Only in ./linux-3.16.3/include/linux: uwb.h
Only in ./linux-3.16.3/include/linux: vermagic.h
Only in ./linux-3.16.3/include/linux: vexpress.h
Only in ./linux-3.16.3/include/linux: vfio.h
Only in ./linux-3.16.3/include/linux: vfs.h
Only in ./linux-3.16.3/include/linux: vgaarb.h
Only in ./linux-3.16.3/include/linux: vga_switcheroo.h
Only in ./linux-3.16.3/include/linux: via-core.h
Only in ./linux-3.16.3/include/linux: via-gpio.h
Only in ./linux-3.16.3/include/linux: via.h
Only in ./linux-3.16.3/include/linux: via_i2c.h
Only in ./linux-3.16.3/include/linux: videodev2.h
Only in ./linux-3.16.3/include/linux: virtio_caif.h
Only in ./linux-3.16.3/include/linux: virtio_config.h
Only in ./linux-3.16.3/include/linux: virtio_console.h
Only in ./linux-3.16.3/include/linux: virtio.h
Only in ./linux-3.16.3/include/linux: virtio_mmio.h
Only in ./linux-3.16.3/include/linux: virtio_ring.h
Only in ./linux-3.16.3/include/linux: virtio_scsi.h
Only in ./linux-3.16.3/include/linux: vlynq.h
Only in ./linux-3.16.3/include/linux: vmacache.h
Only in ./linux-3.16.3/include/linux: vmalloc.h
Only in ./linux-3.16.3/include/linux: vme.h
Only in ./linux-3.16.3/include/linux: vm_event_item.h
Only in ./linux-3.16.3/include/linux: vmpressure.h
Only in ./linux-3.16.3/include/linux: vm_sockets.h
Only in ./linux-3.16.3/include/linux: vmstat.h
Only in ./linux-3.16.3/include/linux: vmw_vmci_api.h
Only in ./linux-3.16.3/include/linux: vmw_vmci_defs.h
Only in ./linux-3.16.3/include/linux: vringh.h
Only in ./linux-3.16.3/include/linux: vt_buffer.h
Only in ./linux-3.16.3/include/linux: vt.h
Only in ./linux-3.16.3/include/linux: vtime.h
Only in ./linux-3.16.3/include/linux: vt_kern.h
Only in ./linux-3.16.3/include/linux: w1-gpio.h
Only in ./linux-3.16.3/include/linux: wait.h
Only in ./linux-3.16.3/include/linux: wanrouter.h
Only in ./linux-3.16.3/include/linux: watchdog.h
Only in ./linux-3.16.3/include/linux: wimax
Only in ./linux-3.16.3/include/linux: wireless.h
Only in ./linux-3.16.3/include/linux: wl12xx.h
Only in ./linux-3.16.3/include/linux: wm97xx.h
Only in ./linux-3.16.3/include/linux: workqueue.h
Only in ./linux-3.16.3/include/linux: writeback.h
Only in ./linux-3.16.3/include/linux: ww_mutex.h
Only in ./linux-3.16.3/include/linux: xattr.h
Only in ./linux-3.16.3/include/linux: xz.h
Only in ./linux-3.16.3/include/linux: yam.h
Only in ./linux-3.16.3/include/linux: z2_battery.h
Only in ./linux-3.16.3/include/linux: zbud.h
Only in ./linux-3.16.3/include/linux: zconf.h
Only in ./linux-3.16.3/include/linux: zlib.h
Only in ./linux-3.16.3/include/linux: zorro.h
Only in ./linux-3.16.3/include/linux: zsmalloc.h
Only in ./linux-3.16.3/include/linux: zutil.h
Only in ./linux-3.16.3/include: math-emu
Only in ./linux-3.16.3/include: media
Only in ./linux-3.16.3/include: memory
Only in ./linux-3.16.3/include: misc
Only in ./linux-3.16.3/include/net: 6lowpan.h
Only in ./linux-3.16.3/include/net: 9p
Only in ./linux-3.16.3/include/net: act_api.h
Only in ./linux-3.16.3/include/net: addrconf.h
Only in ./linux-3.16.3/include/net: af_ieee802154.h
Only in ./linux-3.16.3/include/net: af_rxrpc.h
Only in ./linux-3.16.3/include/net: af_unix.h
Only in ./linux-3.16.3/include/net: af_vsock.h
Only in ./linux-3.16.3/include/net: ah.h
Only in ./linux-3.16.3/include/net: arp.h
Only in ./linux-3.16.3/include/net: atmclip.h
Only in ./linux-3.16.3/include/net: ax25.h
Only in ./linux-3.16.3/include/net: ax88796.h
Only in ./linux-3.16.3/include/net: bluetooth
Only in ./linux-3.16.3/include/net: busy_poll.h
Only in ./linux-3.16.3/include/net: caif
Only in ./linux-3.16.3/include/net: cfg80211.h
Only in ./linux-3.16.3/include/net: cfg80211-wext.h
Only in ./linux-3.16.3/include/net: checksum.h
Only in ./linux-3.16.3/include/net: cipso_ipv4.h
Only in ./linux-3.16.3/include/net: cls_cgroup.h
Only in ./linux-3.16.3/include/net: codel.h
Only in ./linux-3.16.3/include/net: compat.h
Only in ./linux-3.16.3/include/net: datalink.h
Only in ./linux-3.16.3/include/net: dcbevent.h
Only in ./linux-3.16.3/include/net: dcbnl.h
Only in ./linux-3.16.3/include/net: dn_dev.h
Only in ./linux-3.16.3/include/net: dn_fib.h
Only in ./linux-3.16.3/include/net: dn.h
Only in ./linux-3.16.3/include/net: dn_neigh.h
Only in ./linux-3.16.3/include/net: dn_nsp.h
Only in ./linux-3.16.3/include/net: dn_route.h
Only in ./linux-3.16.3/include/net: dsa.h
Only in ./linux-3.16.3/include/net: dsfield.h
Only in ./linux-3.16.3/include/net: dst.h
Only in ./linux-3.16.3/include/net: dst_ops.h
Only in ./linux-3.16.3/include/net: esp.h
Only in ./linux-3.16.3/include/net: ethoc.h
Only in ./linux-3.16.3/include/net: fib_rules.h
Only in ./linux-3.16.3/include/net: firewire.h
Only in ./linux-3.16.3/include/net: flowcache.h
Only in ./linux-3.16.3/include/net: flow.h
Only in ./linux-3.16.3/include/net: flow_keys.h
Only in ./linux-3.16.3/include/net: garp.h
Only in ./linux-3.16.3/include/net: genetlink.h
Only in ./linux-3.16.3/include/net: gen_stats.h
Only in ./linux-3.16.3/include/net: gre.h
Only in ./linux-3.16.3/include/net: gro_cells.h
Only in ./linux-3.16.3/include/net: icmp.h
Only in ./linux-3.16.3/include/net: ieee80211_radiotap.h
Only in ./linux-3.16.3/include/net: ieee802154.h
Only in ./linux-3.16.3/include/net: ieee802154_netdev.h
Only in ./linux-3.16.3/include/net: if_inet6.h
Only in ./linux-3.16.3/include/net: inet6_connection_sock.h
Only in ./linux-3.16.3/include/net: inet6_hashtables.h
Only in ./linux-3.16.3/include/net: inet_common.h
Only in ./linux-3.16.3/include/net: inet_connection_sock.h
Only in ./linux-3.16.3/include/net: inet_ecn.h
Only in ./linux-3.16.3/include/net: inet_frag.h
Only in ./linux-3.16.3/include/net: inet_hashtables.h
Only in ./linux-3.16.3/include/net: inetpeer.h
Only in ./linux-3.16.3/include/net: inet_sock.h
Only in ./linux-3.16.3/include/net: inet_timewait_sock.h
Only in ./linux-3.16.3/include/net: ip6_checksum.h
Only in ./linux-3.16.3/include/net: ip6_fib.h
Only in ./linux-3.16.3/include/net: ip6_route.h
Only in ./linux-3.16.3/include/net: ip6_tunnel.h
Only in ./linux-3.16.3/include/net: ipcomp.h
Only in ./linux-3.16.3/include/net: ipconfig.h
Only in ./linux-3.16.3/include/net: ip_fib.h
Only in ./linux-3.16.3/include/net: ip.h
Only in ./linux-3.16.3/include/net: ip_tunnels.h
Only in ./linux-3.16.3/include/net: ipv6.h
Only in ./linux-3.16.3/include/net: ip_vs.h
Only in ./linux-3.16.3/include/net: ipx.h
Only in ./linux-3.16.3/include/net: irda
Only in ./linux-3.16.3/include/net: iucv
Only in ./linux-3.16.3/include/net: iw_handler.h
Only in ./linux-3.16.3/include/net: lapb.h
Only in ./linux-3.16.3/include/net: lib80211.h
Only in ./linux-3.16.3/include/net: llc_c_ac.h
Only in ./linux-3.16.3/include/net: llc_c_ev.h
Only in ./linux-3.16.3/include/net: llc_conn.h
Only in ./linux-3.16.3/include/net: llc_c_st.h
Only in ./linux-3.16.3/include/net: llc.h
Only in ./linux-3.16.3/include/net: llc_if.h
Only in ./linux-3.16.3/include/net: llc_pdu.h
Only in ./linux-3.16.3/include/net: llc_s_ac.h
Only in ./linux-3.16.3/include/net: llc_sap.h
Only in ./linux-3.16.3/include/net: llc_s_ev.h
Only in ./linux-3.16.3/include/net: llc_s_st.h
Only in ./linux-3.16.3/include/net: mac80211.h
Only in ./linux-3.16.3/include/net: mac802154.h
Only in ./linux-3.16.3/include/net: mip6.h
Only in ./linux-3.16.3/include/net: mld.h
Only in ./linux-3.16.3/include/net: mrp.h
Only in ./linux-3.16.3/include/net: ndisc.h
Only in ./linux-3.16.3/include/net: neighbour.h
Only in ./linux-3.16.3/include/net: netdma.h
Only in ./linux-3.16.3/include/net: netevent.h
Only in ./linux-3.16.3/include/net: netfilter
Only in ./linux-3.16.3/include/net: netlabel.h
Only in ./linux-3.16.3/include/net: netlink.h
Only in ./linux-3.16.3/include/net: net_namespace.h
Only in ./linux-3.16.3/include/net: netns
Only in ./linux-3.16.3/include/net: netprio_cgroup.h
Only in ./linux-3.16.3/include/net: net_ratelimit.h
Only in ./linux-3.16.3/include/net: netrom.h
Only in ./linux-3.16.3/include/net: nexthop.h
Only in ./linux-3.16.3/include/net: nfc
Only in ./linux-3.16.3/include/net: nl802154.h
Only in ./linux-3.16.3/include/net: p8022.h
Only in ./linux-3.16.3/include/net: phonet
Only in ./linux-3.16.3/include/net: ping.h
Only in ./linux-3.16.3/include/net: pkt_cls.h
Only in ./linux-3.16.3/include/net: pkt_sched.h
Only in ./linux-3.16.3/include/net: protocol.h
Only in ./linux-3.16.3/include/net: psnap.h
Only in ./linux-3.16.3/include/net: raw.h
Only in ./linux-3.16.3/include/net: rawv6.h
Only in ./linux-3.16.3/include/net: red.h
Only in ./linux-3.16.3/include/net: regulatory.h
Only in ./linux-3.16.3/include/net: request_sock.h
Only in ./linux-3.16.3/include/net: rose.h
Only in ./linux-3.16.3/include/net: route.h
Only in ./linux-3.16.3/include/net: rtnetlink.h
diff -rup ./linux-3.16.3/include/net/sch_generic.h ./vt_mininet/kernel_changes/include/net/sch_generic.h
--- ./linux-3.16.3/include/net/sch_generic.h	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/include/net/sch_generic.h	2019-03-13 16:02:50.804501956 +0800
@@ -684,6 +684,7 @@ static inline struct sk_buff *skb_act_cl
 
 struct psched_ratecfg {
 	u64	rate_bytes_ps; /* bytes per second */
+	u64 undilated_rate_bytes_ps; /* undilated Bps, should never overwrite after init in htb_change_class() */
 	u32	mult;
 	u16	overhead;
 	u8	linklayer;
@@ -705,6 +706,8 @@ void psched_ratecfg_precompute(struct ps
 			       const struct tc_ratespec *conf,
 			       u64 rate64);
 
+void psched_ratecfg_dilate(struct psched_ratecfg *r, int dilation);
+
 static inline void psched_ratecfg_getrate(struct tc_ratespec *res,
 					  const struct psched_ratecfg *r)
 {
@@ -716,6 +719,19 @@ static inline void psched_ratecfg_getrat
 	 */
 	res->rate = min_t(u64, r->rate_bytes_ps, ~0U);
 
+	/*
+	if (current)
+	{
+		if (current->dilation > 0)
+		{
+			// r->rate_bytes_ps = r->rate_bytes_ps / current->dilation * 1000;
+		}
+		printk("[info] in psched_ratecfg_getrate res->rate(%llu), r->rate_bytes_ps(%llu)\n", res->rate, r->rate_bytes_ps, current->dilation);
+	} else {
+		printk("[info] in psched_ratecfg_getrate current is NULL");
+	}
+	*/
+
 	res->overhead = r->overhead;
 	res->linklayer = (r->linklayer & TC_LINKLAYER_MASK);
 }
Only in ./linux-3.16.3/include/net: scm.h
Only in ./linux-3.16.3/include/net: sctp
Only in ./linux-3.16.3/include/net: secure_seq.h
Only in ./linux-3.16.3/include/net: slhc_vj.h
Only in ./linux-3.16.3/include/net: snmp.h
Only in ./linux-3.16.3/include/net: sock.h
Only in ./linux-3.16.3/include/net: Space.h
Only in ./linux-3.16.3/include/net: stp.h
Only in ./linux-3.16.3/include/net: tc_act
Only in ./linux-3.16.3/include/net: tcp.h
Only in ./linux-3.16.3/include/net: tcp_memcontrol.h
Only in ./linux-3.16.3/include/net: tcp_states.h
Only in ./linux-3.16.3/include/net: timewait_sock.h
Only in ./linux-3.16.3/include/net: transp_v6.h
Only in ./linux-3.16.3/include/net: tso.h
Only in ./linux-3.16.3/include/net: udp.h
Only in ./linux-3.16.3/include/net: udplite.h
Only in ./linux-3.16.3/include/net: vsock_addr.h
Only in ./linux-3.16.3/include/net: vxlan.h
Only in ./linux-3.16.3/include/net: wext.h
Only in ./linux-3.16.3/include/net: wimax.h
Only in ./linux-3.16.3/include/net: wpan-phy.h
Only in ./linux-3.16.3/include/net: x25device.h
Only in ./linux-3.16.3/include/net: x25.h
Only in ./linux-3.16.3/include/net: xfrm.h
Only in ./linux-3.16.3/include: pcmcia
Only in ./linux-3.16.3/include: ras
Only in ./linux-3.16.3/include: rdma
Only in ./linux-3.16.3/include: rxrpc
Only in ./linux-3.16.3/include: scsi
Only in ./linux-3.16.3/include: sound
Only in ./linux-3.16.3/include: target
Only in ./linux-3.16.3/include: trace
Only in ./linux-3.16.3/include/uapi/asm-generic: auxvec.h
Only in ./linux-3.16.3/include/uapi/asm-generic: bitsperlong.h
Only in ./linux-3.16.3/include/uapi/asm-generic: errno-base.h
Only in ./linux-3.16.3/include/uapi/asm-generic: errno.h
Only in ./linux-3.16.3/include/uapi/asm-generic: fcntl.h
Only in ./linux-3.16.3/include/uapi/asm-generic: int-l64.h
Only in ./linux-3.16.3/include/uapi/asm-generic: int-ll64.h
Only in ./linux-3.16.3/include/uapi/asm-generic: ioctl.h
Only in ./linux-3.16.3/include/uapi/asm-generic: ioctls.h
Only in ./linux-3.16.3/include/uapi/asm-generic: ipcbuf.h
Only in ./linux-3.16.3/include/uapi/asm-generic: Kbuild
Only in ./linux-3.16.3/include/uapi/asm-generic: Kbuild.asm
Only in ./linux-3.16.3/include/uapi/asm-generic: kvm_para.h
Only in ./linux-3.16.3/include/uapi/asm-generic: mman-common.h
Only in ./linux-3.16.3/include/uapi/asm-generic: mman.h
Only in ./linux-3.16.3/include/uapi/asm-generic: msgbuf.h
Only in ./linux-3.16.3/include/uapi/asm-generic: param.h
Only in ./linux-3.16.3/include/uapi/asm-generic: poll.h
Only in ./linux-3.16.3/include/uapi/asm-generic: posix_types.h
Only in ./linux-3.16.3/include/uapi/asm-generic: resource.h
Only in ./linux-3.16.3/include/uapi/asm-generic: sembuf.h
Only in ./linux-3.16.3/include/uapi/asm-generic: setup.h
Only in ./linux-3.16.3/include/uapi/asm-generic: shmbuf.h
Only in ./linux-3.16.3/include/uapi/asm-generic: shmparam.h
Only in ./linux-3.16.3/include/uapi/asm-generic: siginfo.h
Only in ./linux-3.16.3/include/uapi/asm-generic: signal-defs.h
Only in ./linux-3.16.3/include/uapi/asm-generic: signal.h
Only in ./linux-3.16.3/include/uapi/asm-generic: socket.h
Only in ./linux-3.16.3/include/uapi/asm-generic: sockios.h
Only in ./linux-3.16.3/include/uapi/asm-generic: statfs.h
Only in ./linux-3.16.3/include/uapi/asm-generic: stat.h
Only in ./linux-3.16.3/include/uapi/asm-generic: swab.h
Only in ./linux-3.16.3/include/uapi/asm-generic: termbits.h
Only in ./linux-3.16.3/include/uapi/asm-generic: termios.h
Only in ./linux-3.16.3/include/uapi/asm-generic: types.h
Only in ./linux-3.16.3/include/uapi/asm-generic: ucontext.h
diff -rup ./linux-3.16.3/include/uapi/asm-generic/unistd.h ./vt_mininet/kernel_changes/include/uapi/asm-generic/unistd.h
--- ./linux-3.16.3/include/uapi/asm-generic/unistd.h	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/include/uapi/asm-generic/unistd.h	2019-03-13 16:02:50.804501956 +0800
@@ -700,8 +700,20 @@ __SYSCALL(__NR_sched_getattr, sys_sched_
 #define __NR_renameat2 276
 __SYSCALL(__NR_renameat2, sys_renameat2)
 
+/* virtual time system calls --- Jiaqi */
+// #define __NR_timeclone 277
+// __SYSCALL(__NR_timeclone, sys_timeclone)
+#define __NR_virtualtimeunshare 278
+__SYSCALL(__NR_virtualtimeunshare, sys_virtualtimeunshare)
+#define __NR_getvirtualtimeofday 279
+__SYSCALL(__NR_getvirtualtimeofday, sys_getvirtualtimeofday)
+#define __NR_helloworld 280
+__SYSCALL(__NR_helloworld, sys_helloworld)
+#define __NR_settimedilationfactor 281
+__SYSCALL(__NR_settimedilationfactor, sys_settimedilationfactor)
+
 #undef __NR_syscalls
-#define __NR_syscalls 277
+#define __NR_syscalls 281
 
 /*
  * All syscalls below here should go away really,
Only in ./linux-3.16.3/include/uapi: drm
Only in ./linux-3.16.3/include/uapi: Kbuild
Only in ./linux-3.16.3/include/uapi/linux: acct.h
Only in ./linux-3.16.3/include/uapi/linux: adb.h
Only in ./linux-3.16.3/include/uapi/linux: adfs_fs.h
Only in ./linux-3.16.3/include/uapi/linux: affs_hardblocks.h
Only in ./linux-3.16.3/include/uapi/linux: agpgart.h
Only in ./linux-3.16.3/include/uapi/linux: aio_abi.h
Only in ./linux-3.16.3/include/uapi/linux: a.out.h
Only in ./linux-3.16.3/include/uapi/linux: apm_bios.h
Only in ./linux-3.16.3/include/uapi/linux: arcfb.h
Only in ./linux-3.16.3/include/uapi/linux: atalk.h
Only in ./linux-3.16.3/include/uapi/linux: atmapi.h
Only in ./linux-3.16.3/include/uapi/linux: atmarp.h
Only in ./linux-3.16.3/include/uapi/linux: atmbr2684.h
Only in ./linux-3.16.3/include/uapi/linux: atmclip.h
Only in ./linux-3.16.3/include/uapi/linux: atmdev.h
Only in ./linux-3.16.3/include/uapi/linux: atm_eni.h
Only in ./linux-3.16.3/include/uapi/linux: atm.h
Only in ./linux-3.16.3/include/uapi/linux: atm_he.h
Only in ./linux-3.16.3/include/uapi/linux: atm_idt77105.h
Only in ./linux-3.16.3/include/uapi/linux: atmioc.h
Only in ./linux-3.16.3/include/uapi/linux: atmlec.h
Only in ./linux-3.16.3/include/uapi/linux: atmmpc.h
Only in ./linux-3.16.3/include/uapi/linux: atm_nicstar.h
Only in ./linux-3.16.3/include/uapi/linux: atmppp.h
Only in ./linux-3.16.3/include/uapi/linux: atmsap.h
Only in ./linux-3.16.3/include/uapi/linux: atmsvc.h
Only in ./linux-3.16.3/include/uapi/linux: atm_tcp.h
Only in ./linux-3.16.3/include/uapi/linux: atm_zatm.h
Only in ./linux-3.16.3/include/uapi/linux: audit.h
Only in ./linux-3.16.3/include/uapi/linux: auto_fs4.h
Only in ./linux-3.16.3/include/uapi/linux: auto_fs.h
Only in ./linux-3.16.3/include/uapi/linux: auxvec.h
Only in ./linux-3.16.3/include/uapi/linux: ax25.h
Only in ./linux-3.16.3/include/uapi/linux: b1lli.h
Only in ./linux-3.16.3/include/uapi/linux: baycom.h
Only in ./linux-3.16.3/include/uapi/linux: bcache.h
Only in ./linux-3.16.3/include/uapi/linux: bcm933xx_hcs.h
Only in ./linux-3.16.3/include/uapi/linux: bfs_fs.h
Only in ./linux-3.16.3/include/uapi/linux: binfmts.h
Only in ./linux-3.16.3/include/uapi/linux: blkpg.h
Only in ./linux-3.16.3/include/uapi/linux: blktrace_api.h
Only in ./linux-3.16.3/include/uapi/linux: bpqether.h
Only in ./linux-3.16.3/include/uapi/linux: bsg.h
Only in ./linux-3.16.3/include/uapi/linux: btrfs.h
Only in ./linux-3.16.3/include/uapi/linux: byteorder
Only in ./linux-3.16.3/include/uapi/linux: caif
Only in ./linux-3.16.3/include/uapi/linux: can
Only in ./linux-3.16.3/include/uapi/linux: can.h
Only in ./linux-3.16.3/include/uapi/linux: capability.h
Only in ./linux-3.16.3/include/uapi/linux: capi.h
Only in ./linux-3.16.3/include/uapi/linux: cciss_defs.h
Only in ./linux-3.16.3/include/uapi/linux: cciss_ioctl.h
Only in ./linux-3.16.3/include/uapi/linux: cdrom.h
Only in ./linux-3.16.3/include/uapi/linux: cgroupstats.h
Only in ./linux-3.16.3/include/uapi/linux: chio.h
Only in ./linux-3.16.3/include/uapi/linux: cifs
Only in ./linux-3.16.3/include/uapi/linux: cm4000_cs.h
Only in ./linux-3.16.3/include/uapi/linux: cn_proc.h
Only in ./linux-3.16.3/include/uapi/linux: coda.h
Only in ./linux-3.16.3/include/uapi/linux: coda_psdev.h
Only in ./linux-3.16.3/include/uapi/linux: coff.h
Only in ./linux-3.16.3/include/uapi/linux: connector.h
Only in ./linux-3.16.3/include/uapi/linux: const.h
Only in ./linux-3.16.3/include/uapi/linux: cramfs_fs.h
Only in ./linux-3.16.3/include/uapi/linux: cuda.h
Only in ./linux-3.16.3/include/uapi/linux: cyclades.h
Only in ./linux-3.16.3/include/uapi/linux: cycx_cfm.h
Only in ./linux-3.16.3/include/uapi/linux: dcbnl.h
Only in ./linux-3.16.3/include/uapi/linux: dccp.h
Only in ./linux-3.16.3/include/uapi/linux: dlmconstants.h
Only in ./linux-3.16.3/include/uapi/linux: dlm_device.h
Only in ./linux-3.16.3/include/uapi/linux: dlm.h
Only in ./linux-3.16.3/include/uapi/linux: dlm_netlink.h
Only in ./linux-3.16.3/include/uapi/linux: dlm_plock.h
Only in ./linux-3.16.3/include/uapi/linux: dm-ioctl.h
Only in ./linux-3.16.3/include/uapi/linux: dm-log-userspace.h
Only in ./linux-3.16.3/include/uapi/linux: dn.h
Only in ./linux-3.16.3/include/uapi/linux: dqblk_xfs.h
Only in ./linux-3.16.3/include/uapi/linux: dvb
Only in ./linux-3.16.3/include/uapi/linux: edd.h
Only in ./linux-3.16.3/include/uapi/linux: efs_fs_sb.h
Only in ./linux-3.16.3/include/uapi/linux: elfcore.h
Only in ./linux-3.16.3/include/uapi/linux: elf-em.h
Only in ./linux-3.16.3/include/uapi/linux: elf-fdpic.h
Only in ./linux-3.16.3/include/uapi/linux: elf.h
Only in ./linux-3.16.3/include/uapi/linux: errno.h
Only in ./linux-3.16.3/include/uapi/linux: errqueue.h
Only in ./linux-3.16.3/include/uapi/linux: ethtool.h
Only in ./linux-3.16.3/include/uapi/linux: eventpoll.h
Only in ./linux-3.16.3/include/uapi/linux: fadvise.h
Only in ./linux-3.16.3/include/uapi/linux: falloc.h
Only in ./linux-3.16.3/include/uapi/linux: fanotify.h
Only in ./linux-3.16.3/include/uapi/linux: fb.h
Only in ./linux-3.16.3/include/uapi/linux: fcntl.h
Only in ./linux-3.16.3/include/uapi/linux: fd.h
Only in ./linux-3.16.3/include/uapi/linux: fdreg.h
Only in ./linux-3.16.3/include/uapi/linux: fib_rules.h
Only in ./linux-3.16.3/include/uapi/linux: fiemap.h
Only in ./linux-3.16.3/include/uapi/linux: filter.h
Only in ./linux-3.16.3/include/uapi/linux: firewire-cdev.h
Only in ./linux-3.16.3/include/uapi/linux: firewire-constants.h
Only in ./linux-3.16.3/include/uapi/linux: flat.h
Only in ./linux-3.16.3/include/uapi/linux: fs.h
Only in ./linux-3.16.3/include/uapi/linux: fsl_hypervisor.h
Only in ./linux-3.16.3/include/uapi/linux: fuse.h
Only in ./linux-3.16.3/include/uapi/linux: futex.h
Only in ./linux-3.16.3/include/uapi/linux: gameport.h
Only in ./linux-3.16.3/include/uapi/linux: genetlink.h
Only in ./linux-3.16.3/include/uapi/linux: gen_stats.h
Only in ./linux-3.16.3/include/uapi/linux: genwqe
Only in ./linux-3.16.3/include/uapi/linux: gfs2_ondisk.h
Only in ./linux-3.16.3/include/uapi/linux: gigaset_dev.h
Only in ./linux-3.16.3/include/uapi/linux: hash_info.h
Only in ./linux-3.16.3/include/uapi/linux: hdlc
Only in ./linux-3.16.3/include/uapi/linux: hdlcdrv.h
Only in ./linux-3.16.3/include/uapi/linux: hdlc.h
Only in ./linux-3.16.3/include/uapi/linux: hdreg.h
Only in ./linux-3.16.3/include/uapi/linux: hiddev.h
Only in ./linux-3.16.3/include/uapi/linux: hid.h
Only in ./linux-3.16.3/include/uapi/linux: hidraw.h
Only in ./linux-3.16.3/include/uapi/linux: hpet.h
Only in ./linux-3.16.3/include/uapi/linux: hsi
Only in ./linux-3.16.3/include/uapi/linux: hsr_netlink.h
Only in ./linux-3.16.3/include/uapi/linux: hw_breakpoint.h
Only in ./linux-3.16.3/include/uapi/linux: hyperv.h
Only in ./linux-3.16.3/include/uapi/linux: hysdn_if.h
Only in ./linux-3.16.3/include/uapi/linux: i2c-dev.h
Only in ./linux-3.16.3/include/uapi/linux: i2c.h
Only in ./linux-3.16.3/include/uapi/linux: i2o-dev.h
Only in ./linux-3.16.3/include/uapi/linux: i8k.h
Only in ./linux-3.16.3/include/uapi/linux: icmp.h
Only in ./linux-3.16.3/include/uapi/linux: icmpv6.h
Only in ./linux-3.16.3/include/uapi/linux: if_addr.h
Only in ./linux-3.16.3/include/uapi/linux: if_addrlabel.h
Only in ./linux-3.16.3/include/uapi/linux: if_alg.h
Only in ./linux-3.16.3/include/uapi/linux: if_arcnet.h
Only in ./linux-3.16.3/include/uapi/linux: if_arp.h
Only in ./linux-3.16.3/include/uapi/linux: if_bonding.h
Only in ./linux-3.16.3/include/uapi/linux: if_bridge.h
Only in ./linux-3.16.3/include/uapi/linux: if_cablemodem.h
Only in ./linux-3.16.3/include/uapi/linux: if_eql.h
Only in ./linux-3.16.3/include/uapi/linux: if_ether.h
Only in ./linux-3.16.3/include/uapi/linux: if_fc.h
Only in ./linux-3.16.3/include/uapi/linux: if_fddi.h
Only in ./linux-3.16.3/include/uapi/linux: if_frad.h
Only in ./linux-3.16.3/include/uapi/linux: if.h
Only in ./linux-3.16.3/include/uapi/linux: if_hippi.h
Only in ./linux-3.16.3/include/uapi/linux: if_infiniband.h
Only in ./linux-3.16.3/include/uapi/linux: if_link.h
Only in ./linux-3.16.3/include/uapi/linux: if_ltalk.h
Only in ./linux-3.16.3/include/uapi/linux: if_packet.h
Only in ./linux-3.16.3/include/uapi/linux: if_phonet.h
Only in ./linux-3.16.3/include/uapi/linux: if_plip.h
Only in ./linux-3.16.3/include/uapi/linux: if_ppp.h
Only in ./linux-3.16.3/include/uapi/linux: if_pppol2tp.h
Only in ./linux-3.16.3/include/uapi/linux: if_pppox.h
Only in ./linux-3.16.3/include/uapi/linux: if_slip.h
Only in ./linux-3.16.3/include/uapi/linux: if_team.h
Only in ./linux-3.16.3/include/uapi/linux: if_tun.h
Only in ./linux-3.16.3/include/uapi/linux: if_tunnel.h
Only in ./linux-3.16.3/include/uapi/linux: if_vlan.h
Only in ./linux-3.16.3/include/uapi/linux: if_x25.h
Only in ./linux-3.16.3/include/uapi/linux: igmp.h
Only in ./linux-3.16.3/include/uapi/linux: in6.h
Only in ./linux-3.16.3/include/uapi/linux: inet_diag.h
Only in ./linux-3.16.3/include/uapi/linux: in.h
Only in ./linux-3.16.3/include/uapi/linux: inotify.h
Only in ./linux-3.16.3/include/uapi/linux: input.h
Only in ./linux-3.16.3/include/uapi/linux: in_route.h
Only in ./linux-3.16.3/include/uapi/linux: ioctl.h
Only in ./linux-3.16.3/include/uapi/linux: ip6_tunnel.h
Only in ./linux-3.16.3/include/uapi/linux: ipc.h
Only in ./linux-3.16.3/include/uapi/linux: ip.h
Only in ./linux-3.16.3/include/uapi/linux: ipmi.h
Only in ./linux-3.16.3/include/uapi/linux: ipmi_msgdefs.h
Only in ./linux-3.16.3/include/uapi/linux: ipsec.h
Only in ./linux-3.16.3/include/uapi/linux: ipv6.h
Only in ./linux-3.16.3/include/uapi/linux: ipv6_route.h
Only in ./linux-3.16.3/include/uapi/linux: ip_vs.h
Only in ./linux-3.16.3/include/uapi/linux: ipx.h
Only in ./linux-3.16.3/include/uapi/linux: irda.h
Only in ./linux-3.16.3/include/uapi/linux: irqnr.h
Only in ./linux-3.16.3/include/uapi/linux: isdn
Only in ./linux-3.16.3/include/uapi/linux: isdn_divertif.h
Only in ./linux-3.16.3/include/uapi/linux: isdn.h
Only in ./linux-3.16.3/include/uapi/linux: isdnif.h
Only in ./linux-3.16.3/include/uapi/linux: isdn_ppp.h
Only in ./linux-3.16.3/include/uapi/linux: iso_fs.h
Only in ./linux-3.16.3/include/uapi/linux: ivtvfb.h
Only in ./linux-3.16.3/include/uapi/linux: ivtv.h
Only in ./linux-3.16.3/include/uapi/linux: ixjuser.h
Only in ./linux-3.16.3/include/uapi/linux: jffs2.h
Only in ./linux-3.16.3/include/uapi/linux: joystick.h
Only in ./linux-3.16.3/include/uapi/linux: Kbuild
Only in ./linux-3.16.3/include/uapi/linux: kdev_t.h
Only in ./linux-3.16.3/include/uapi/linux: kd.h
Only in ./linux-3.16.3/include/uapi/linux: kernelcapi.h
Only in ./linux-3.16.3/include/uapi/linux: kernel.h
Only in ./linux-3.16.3/include/uapi/linux: kernel-page-flags.h
Only in ./linux-3.16.3/include/uapi/linux: kexec.h
Only in ./linux-3.16.3/include/uapi/linux: keyboard.h
Only in ./linux-3.16.3/include/uapi/linux: keyctl.h
Only in ./linux-3.16.3/include/uapi/linux: kvm.h
Only in ./linux-3.16.3/include/uapi/linux: kvm_para.h
Only in ./linux-3.16.3/include/uapi/linux: l2tp.h
Only in ./linux-3.16.3/include/uapi/linux: libc-compat.h
Only in ./linux-3.16.3/include/uapi/linux: limits.h
Only in ./linux-3.16.3/include/uapi/linux: llc.h
Only in ./linux-3.16.3/include/uapi/linux: loop.h
Only in ./linux-3.16.3/include/uapi/linux: lp.h
Only in ./linux-3.16.3/include/uapi/linux: magic.h
Only in ./linux-3.16.3/include/uapi/linux: major.h
Only in ./linux-3.16.3/include/uapi/linux: map_to_7segment.h
Only in ./linux-3.16.3/include/uapi/linux: matroxfb.h
Only in ./linux-3.16.3/include/uapi/linux: mdio.h
Only in ./linux-3.16.3/include/uapi/linux: media.h
Only in ./linux-3.16.3/include/uapi/linux: mei.h
Only in ./linux-3.16.3/include/uapi/linux: mempolicy.h
Only in ./linux-3.16.3/include/uapi/linux: meye.h
Only in ./linux-3.16.3/include/uapi/linux: mic_common.h
Only in ./linux-3.16.3/include/uapi/linux: mic_ioctl.h
Only in ./linux-3.16.3/include/uapi/linux: mii.h
Only in ./linux-3.16.3/include/uapi/linux: minix_fs.h
Only in ./linux-3.16.3/include/uapi/linux: mman.h
Only in ./linux-3.16.3/include/uapi/linux: mmc
Only in ./linux-3.16.3/include/uapi/linux: mmtimer.h
Only in ./linux-3.16.3/include/uapi/linux: module.h
Only in ./linux-3.16.3/include/uapi/linux: mpls.h
Only in ./linux-3.16.3/include/uapi/linux: mqueue.h
Only in ./linux-3.16.3/include/uapi/linux: mroute6.h
Only in ./linux-3.16.3/include/uapi/linux: mroute.h
Only in ./linux-3.16.3/include/uapi/linux: msdos_fs.h
Only in ./linux-3.16.3/include/uapi/linux: msg.h
Only in ./linux-3.16.3/include/uapi/linux: mtio.h
Only in ./linux-3.16.3/include/uapi/linux: nbd.h
Only in ./linux-3.16.3/include/uapi/linux: ncp_fs.h
Only in ./linux-3.16.3/include/uapi/linux: ncp.h
Only in ./linux-3.16.3/include/uapi/linux: ncp_mount.h
Only in ./linux-3.16.3/include/uapi/linux: ncp_no.h
Only in ./linux-3.16.3/include/uapi/linux: neighbour.h
Only in ./linux-3.16.3/include/uapi/linux: netconf.h
Only in ./linux-3.16.3/include/uapi/linux: netdevice.h
Only in ./linux-3.16.3/include/uapi/linux: net_dropmon.h
Only in ./linux-3.16.3/include/uapi/linux: netfilter
Only in ./linux-3.16.3/include/uapi/linux: netfilter_arp
Only in ./linux-3.16.3/include/uapi/linux: netfilter_arp.h
Only in ./linux-3.16.3/include/uapi/linux: netfilter_bridge
Only in ./linux-3.16.3/include/uapi/linux: netfilter_bridge.h
Only in ./linux-3.16.3/include/uapi/linux: netfilter_decnet.h
Only in ./linux-3.16.3/include/uapi/linux: netfilter.h
Only in ./linux-3.16.3/include/uapi/linux: netfilter_ipv4
Only in ./linux-3.16.3/include/uapi/linux: netfilter_ipv4.h
Only in ./linux-3.16.3/include/uapi/linux: netfilter_ipv6
Only in ./linux-3.16.3/include/uapi/linux: netfilter_ipv6.h
Only in ./linux-3.16.3/include/uapi/linux: net.h
Only in ./linux-3.16.3/include/uapi/linux: netlink_diag.h
Only in ./linux-3.16.3/include/uapi/linux: netlink.h
Only in ./linux-3.16.3/include/uapi/linux: netrom.h
Only in ./linux-3.16.3/include/uapi/linux: net_tstamp.h
Only in ./linux-3.16.3/include/uapi/linux: nfc.h
Only in ./linux-3.16.3/include/uapi/linux: nfs2.h
Only in ./linux-3.16.3/include/uapi/linux: nfs3.h
Only in ./linux-3.16.3/include/uapi/linux: nfs4.h
Only in ./linux-3.16.3/include/uapi/linux: nfs4_mount.h
Only in ./linux-3.16.3/include/uapi/linux: nfsacl.h
Only in ./linux-3.16.3/include/uapi/linux: nfsd
Only in ./linux-3.16.3/include/uapi/linux: nfs_fs.h
Only in ./linux-3.16.3/include/uapi/linux: nfs.h
Only in ./linux-3.16.3/include/uapi/linux: nfs_idmap.h
Only in ./linux-3.16.3/include/uapi/linux: nfs_mount.h
Only in ./linux-3.16.3/include/uapi/linux: nl80211.h
Only in ./linux-3.16.3/include/uapi/linux: n_r3964.h
Only in ./linux-3.16.3/include/uapi/linux: nubus.h
Only in ./linux-3.16.3/include/uapi/linux: nvme.h
Only in ./linux-3.16.3/include/uapi/linux: nvram.h
Only in ./linux-3.16.3/include/uapi/linux: omap3isp.h
Only in ./linux-3.16.3/include/uapi/linux: omapfb.h
Only in ./linux-3.16.3/include/uapi/linux: oom.h
Only in ./linux-3.16.3/include/uapi/linux: openvswitch.h
Only in ./linux-3.16.3/include/uapi/linux: packet_diag.h
Only in ./linux-3.16.3/include/uapi/linux: param.h
Only in ./linux-3.16.3/include/uapi/linux: parport.h
Only in ./linux-3.16.3/include/uapi/linux: patchkey.h
Only in ./linux-3.16.3/include/uapi/linux: pci.h
Only in ./linux-3.16.3/include/uapi/linux: pci_regs.h
Only in ./linux-3.16.3/include/uapi/linux: perf_event.h
Only in ./linux-3.16.3/include/uapi/linux: personality.h
Only in ./linux-3.16.3/include/uapi/linux: pfkeyv2.h
Only in ./linux-3.16.3/include/uapi/linux: pg.h
Only in ./linux-3.16.3/include/uapi/linux: phantom.h
Only in ./linux-3.16.3/include/uapi/linux: phonet.h
Only in ./linux-3.16.3/include/uapi/linux: pktcdvd.h
Only in ./linux-3.16.3/include/uapi/linux: pkt_cls.h
Only in ./linux-3.16.3/include/uapi/linux: pkt_sched.h
Only in ./linux-3.16.3/include/uapi/linux: pmu.h
Only in ./linux-3.16.3/include/uapi/linux: poll.h
Only in ./linux-3.16.3/include/uapi/linux: posix_types.h
Only in ./linux-3.16.3/include/uapi/linux: ppdev.h
Only in ./linux-3.16.3/include/uapi/linux: ppp-comp.h
Only in ./linux-3.16.3/include/uapi/linux: ppp_defs.h
Only in ./linux-3.16.3/include/uapi/linux: ppp-ioctl.h
Only in ./linux-3.16.3/include/uapi/linux: pps.h
Only in ./linux-3.16.3/include/uapi/linux: prctl.h
Only in ./linux-3.16.3/include/uapi/linux: psci.h
Only in ./linux-3.16.3/include/uapi/linux: ptp_clock.h
Only in ./linux-3.16.3/include/uapi/linux: ptrace.h
Only in ./linux-3.16.3/include/uapi/linux: qnx4_fs.h
Only in ./linux-3.16.3/include/uapi/linux: qnxtypes.h
Only in ./linux-3.16.3/include/uapi/linux: quota.h
Only in ./linux-3.16.3/include/uapi/linux: radeonfb.h
Only in ./linux-3.16.3/include/uapi/linux: raid
Only in ./linux-3.16.3/include/uapi/linux: random.h
Only in ./linux-3.16.3/include/uapi/linux: raw.h
Only in ./linux-3.16.3/include/uapi/linux: rds.h
Only in ./linux-3.16.3/include/uapi/linux: reboot.h
Only in ./linux-3.16.3/include/uapi/linux: reiserfs_fs.h
Only in ./linux-3.16.3/include/uapi/linux: reiserfs_xattr.h
Only in ./linux-3.16.3/include/uapi/linux: resource.h
Only in ./linux-3.16.3/include/uapi/linux: rfkill.h
Only in ./linux-3.16.3/include/uapi/linux: romfs_fs.h
Only in ./linux-3.16.3/include/uapi/linux: rose.h
Only in ./linux-3.16.3/include/uapi/linux: route.h
Only in ./linux-3.16.3/include/uapi/linux: rtc.h
Only in ./linux-3.16.3/include/uapi/linux: rtnetlink.h
Only in ./linux-3.16.3/include/uapi/linux: scc.h
diff -rup ./linux-3.16.3/include/uapi/linux/sched.h ./vt_mininet/kernel_changes/include/uapi/linux/sched.h
--- ./linux-3.16.3/include/uapi/linux/sched.h	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/include/uapi/linux/sched.h	2019-03-13 16:02:50.804501956 +0800
@@ -21,6 +21,8 @@
 #define CLONE_DETACHED		0x00400000	/* Unused, ignored */
 #define CLONE_UNTRACED		0x00800000	/* set if the tracing process can't force CLONE_PTRACE on this clone */
 #define CLONE_CHILD_SETTID	0x01000000	/* set the TID in the child */
+#define CLONE_TIME          0x02000000  /* virtual time support --- Jiaqi */
+
 /* 0x02000000 was previously the unused CLONE_STOPPED (Start in stopped state)
    and is now available for re-use. */
 #define CLONE_NEWUTS		0x04000000	/* New utsname group? */
Only in ./linux-3.16.3/include/uapi/linux: screen_info.h
Only in ./linux-3.16.3/include/uapi/linux: sctp.h
Only in ./linux-3.16.3/include/uapi/linux: sdla.h
Only in ./linux-3.16.3/include/uapi/linux: seccomp.h
Only in ./linux-3.16.3/include/uapi/linux: securebits.h
Only in ./linux-3.16.3/include/uapi/linux: selinux_netlink.h
Only in ./linux-3.16.3/include/uapi/linux: sem.h
Only in ./linux-3.16.3/include/uapi/linux: serial_core.h
Only in ./linux-3.16.3/include/uapi/linux: serial.h
Only in ./linux-3.16.3/include/uapi/linux: serial_reg.h
Only in ./linux-3.16.3/include/uapi/linux: serio.h
Only in ./linux-3.16.3/include/uapi/linux: shm.h
Only in ./linux-3.16.3/include/uapi/linux: signalfd.h
Only in ./linux-3.16.3/include/uapi/linux: signal.h
Only in ./linux-3.16.3/include/uapi/linux: snmp.h
Only in ./linux-3.16.3/include/uapi/linux: sock_diag.h
Only in ./linux-3.16.3/include/uapi/linux: socket.h
Only in ./linux-3.16.3/include/uapi/linux: sockios.h
Only in ./linux-3.16.3/include/uapi/linux: som.h
Only in ./linux-3.16.3/include/uapi/linux: sonet.h
Only in ./linux-3.16.3/include/uapi/linux: sonypi.h
Only in ./linux-3.16.3/include/uapi/linux: soundcard.h
Only in ./linux-3.16.3/include/uapi/linux: sound.h
Only in ./linux-3.16.3/include/uapi/linux: spi
Only in ./linux-3.16.3/include/uapi/linux: stat.h
Only in ./linux-3.16.3/include/uapi/linux: stddef.h
Only in ./linux-3.16.3/include/uapi/linux: string.h
Only in ./linux-3.16.3/include/uapi/linux: sunrpc
Only in ./linux-3.16.3/include/uapi/linux: suspend_ioctls.h
Only in ./linux-3.16.3/include/uapi/linux: swab.h
Only in ./linux-3.16.3/include/uapi/linux: synclink.h
Only in ./linux-3.16.3/include/uapi/linux: sysctl.h
Only in ./linux-3.16.3/include/uapi/linux: sysinfo.h
Only in ./linux-3.16.3/include/uapi/linux: taskstats.h
Only in ./linux-3.16.3/include/uapi/linux: tc_act
Only in ./linux-3.16.3/include/uapi/linux: tc_ematch
Only in ./linux-3.16.3/include/uapi/linux: tcp.h
Only in ./linux-3.16.3/include/uapi/linux: tcp_metrics.h
Only in ./linux-3.16.3/include/uapi/linux: telephony.h
Only in ./linux-3.16.3/include/uapi/linux: termios.h
Only in ./linux-3.16.3/include/uapi/linux: time.h
Only in ./linux-3.16.3/include/uapi/linux: times.h
Only in ./linux-3.16.3/include/uapi/linux: timex.h
Only in ./linux-3.16.3/include/uapi/linux: tiocl.h
Only in ./linux-3.16.3/include/uapi/linux: tipc_config.h
Only in ./linux-3.16.3/include/uapi/linux: tipc.h
Only in ./linux-3.16.3/include/uapi/linux: toshiba.h
Only in ./linux-3.16.3/include/uapi/linux: tty_flags.h
Only in ./linux-3.16.3/include/uapi/linux: tty.h
Only in ./linux-3.16.3/include/uapi/linux: types.h
Only in ./linux-3.16.3/include/uapi/linux: udf_fs_i.h
Only in ./linux-3.16.3/include/uapi/linux: udp.h
Only in ./linux-3.16.3/include/uapi/linux: uhid.h
Only in ./linux-3.16.3/include/uapi/linux: uinput.h
Only in ./linux-3.16.3/include/uapi/linux: uio.h
Only in ./linux-3.16.3/include/uapi/linux: ultrasound.h
Only in ./linux-3.16.3/include/uapi/linux: un.h
Only in ./linux-3.16.3/include/uapi/linux: unistd.h
Only in ./linux-3.16.3/include/uapi/linux: unix_diag.h
Only in ./linux-3.16.3/include/uapi/linux: usb
Only in ./linux-3.16.3/include/uapi/linux: usbdevice_fs.h
Only in ./linux-3.16.3/include/uapi/linux: utime.h
Only in ./linux-3.16.3/include/uapi/linux: utsname.h
Only in ./linux-3.16.3/include/uapi/linux: uuid.h
Only in ./linux-3.16.3/include/uapi/linux: uvcvideo.h
Only in ./linux-3.16.3/include/uapi/linux: v4l2-common.h
Only in ./linux-3.16.3/include/uapi/linux: v4l2-controls.h
Only in ./linux-3.16.3/include/uapi/linux: v4l2-dv-timings.h
Only in ./linux-3.16.3/include/uapi/linux: v4l2-mediabus.h
Only in ./linux-3.16.3/include/uapi/linux: v4l2-subdev.h
Only in ./linux-3.16.3/include/uapi/linux: veth.h
Only in ./linux-3.16.3/include/uapi/linux: vfio.h
Only in ./linux-3.16.3/include/uapi/linux: vhost.h
Only in ./linux-3.16.3/include/uapi/linux: videodev2.h
Only in ./linux-3.16.3/include/uapi/linux: virtio_9p.h
Only in ./linux-3.16.3/include/uapi/linux: virtio_balloon.h
Only in ./linux-3.16.3/include/uapi/linux: virtio_blk.h
Only in ./linux-3.16.3/include/uapi/linux: virtio_config.h
Only in ./linux-3.16.3/include/uapi/linux: virtio_console.h
Only in ./linux-3.16.3/include/uapi/linux: virtio_ids.h
Only in ./linux-3.16.3/include/uapi/linux: virtio_net.h
Only in ./linux-3.16.3/include/uapi/linux: virtio_pci.h
Only in ./linux-3.16.3/include/uapi/linux: virtio_ring.h
Only in ./linux-3.16.3/include/uapi/linux: virtio_rng.h
Only in ./linux-3.16.3/include/uapi/linux: vm_sockets.h
Only in ./linux-3.16.3/include/uapi/linux: vsp1.h
Only in ./linux-3.16.3/include/uapi/linux: vt.h
Only in ./linux-3.16.3/include/uapi/linux: wait.h
Only in ./linux-3.16.3/include/uapi/linux: wanrouter.h
Only in ./linux-3.16.3/include/uapi/linux: watchdog.h
Only in ./linux-3.16.3/include/uapi/linux: wimax
Only in ./linux-3.16.3/include/uapi/linux: wimax.h
Only in ./linux-3.16.3/include/uapi/linux: wireless.h
Only in ./linux-3.16.3/include/uapi/linux: x25.h
Only in ./linux-3.16.3/include/uapi/linux: xattr.h
Only in ./linux-3.16.3/include/uapi/linux: xfrm.h
Only in ./linux-3.16.3/include/uapi/linux: zorro.h
Only in ./linux-3.16.3/include/uapi/linux: zorro_ids.h
Only in ./linux-3.16.3/include/uapi: mtd
Only in ./linux-3.16.3/include/uapi: rdma
Only in ./linux-3.16.3/include/uapi: scsi
Only in ./linux-3.16.3/include/uapi: sound
Only in ./linux-3.16.3/include/uapi: video
Only in ./linux-3.16.3/include/uapi: xen
Only in ./linux-3.16.3/include: video
Only in ./linux-3.16.3/include: xen
Only in ./linux-3.16.3/: init
Only in ./linux-3.16.3/: ipc
Only in ./linux-3.16.3/: Kbuild
Only in ./linux-3.16.3/: Kconfig
Only in ./linux-3.16.3/kernel: acct.c
Only in ./linux-3.16.3/kernel: async.c
Only in ./linux-3.16.3/kernel: audit.c
Only in ./linux-3.16.3/kernel: auditfilter.c
Only in ./linux-3.16.3/kernel: audit.h
Only in ./linux-3.16.3/kernel: auditsc.c
Only in ./linux-3.16.3/kernel: audit_tree.c
Only in ./linux-3.16.3/kernel: audit_watch.c
Only in ./linux-3.16.3/kernel: backtracetest.c
Only in ./linux-3.16.3/kernel: bounds.c
Only in ./linux-3.16.3/kernel: capability.c
Only in ./linux-3.16.3/kernel: cgroup.c
Only in ./linux-3.16.3/kernel: cgroup_freezer.c
Only in ./linux-3.16.3/kernel: compat.c
Only in ./linux-3.16.3/kernel: configs.c
Only in ./linux-3.16.3/kernel: context_tracking.c
Only in ./linux-3.16.3/kernel: cpu.c
Only in ./linux-3.16.3/kernel: cpu_pm.c
Only in ./linux-3.16.3/kernel: cpuset.c
Only in ./linux-3.16.3/kernel: crash_dump.c
Only in ./linux-3.16.3/kernel: cred.c
Only in ./linux-3.16.3/kernel: debug
Only in ./linux-3.16.3/kernel: delayacct.c
Only in ./linux-3.16.3/kernel: dma.c
Only in ./linux-3.16.3/kernel: elfcore.c
Only in ./linux-3.16.3/kernel: events
Only in ./linux-3.16.3/kernel: exec_domain.c
Only in ./linux-3.16.3/kernel: exit.c
Only in ./linux-3.16.3/kernel: extable.c
diff -rup ./linux-3.16.3/kernel/fork.c ./vt_mininet/kernel_changes/kernel/fork.c
--- ./linux-3.16.3/kernel/fork.c	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/kernel/fork.c	2019-03-13 16:02:50.804501956 +0800
@@ -2,8 +2,8 @@
  *  linux/kernel/fork.c
  *
  *  Copyright (C) 1991, 1992  Linus Torvalds
+ *
  */
-
 /*
  *  'fork.c' contains the help-routines for the 'fork' system call
  * (see also entry.S and others).
@@ -1567,6 +1567,54 @@ struct task_struct *fork_idle(int cpu)
 }
 
 /*
+ *	Initialize virtual start time as this moment
+ */
+static void init_virtual_start_time(struct task_struct *task, int dilation)
+{
+	// if(likely(dilation != 0)) 
+	if(dilation > 0) {
+
+	    /* just make sure further get(ns)timeofday return original time */
+	    // task->virtual_start_time = 0; 
+	    task->virtual_start_nsec = 0;
+		task->dilation = 0;
+	    /* initialize fields of time, old version virtual time */
+	    // struct timeval now;
+	    // do_gettimeofday(&now);
+	    // task->virtual_start_time = timeval_to_ns(&now);
+	    // task->physical_past_time = 0;
+	    // task->virtual_past_time = 0;
+	    // printk("[info] [process %d] created and started at %ld\n", task->pid, task->virtual_start_time);
+
+	    /* method 1: will return nano seconds since Epoch 1970 */
+	    struct timespec ts;
+	    getnstimeofday(&ts);
+		s64 getnstimeofday_nsec= timespec_to_ns(&ts);
+	    // printk("[info] [process %d] getnstimeofday virtual start time = %lld nano secs\n", task->pid, getnstimeofday_nsec);
+
+	    /* method 2: will return nano seconds since system boot 
+	    s64 ktime_nsec = ktime_to_ns(ktime_get());
+	    printk("[info] [process %d] ktime_get virtual start time = %lld nano secs\n", task->pid, ktime_nsec);
+		*/
+	    
+	    /* method 3: as the same as method 1 
+	    struct timeval tv;
+		do_gettimeofday(&tv);
+	    s64 do_gettimeofday_nsec = timeval_to_ns(&tv);
+	    printk("[info] [process %d] do_gettimeofday virtual start time = %lld\n", task->pid, do_gettimeofday_nsec);
+		*/
+	    
+	    /* initialize fields of nsec */
+		task->virtual_start_nsec = getnstimeofday_nsec;
+		// task->virtual_start_nsec = ktime_nsec;
+		// task->virtual_start_nsec = do_gettimeofday_nsec;
+	    task->physical_past_nsec = 0;
+	    task->virtual_past_nsec = 0;
+	    task->dilation = dilation;
+	}
+}
+
+/*
  *  Ok, this is the main fork-routine.
  *
  * It copies the process, and if successful kick-starts
@@ -1582,6 +1630,12 @@ long do_fork(unsigned long clone_flags,
 	int trace = 0;
 	long nr;
 
+    int dilation = 0;
+
+    if(clone_flags & CLONE_TIME) {
+        dilation = (int)stack_size;
+        stack_size = 0;
+    }
 	/*
 	 * Determine whether and which event to report to ptracer.  When
 	 * called from kernel_thread or CLONE_UNTRACED is explicitly
@@ -1602,6 +1656,7 @@ long do_fork(unsigned long clone_flags,
 
 	p = copy_process(clone_flags, stack_start, stack_size,
 			 child_tidptr, NULL, trace);
+
 	/*
 	 * Do this prior waking up the new thread - the thread pointer
 	 * might get invalid after that point, if the thread exits quickly.
@@ -1624,6 +1679,11 @@ long do_fork(unsigned long clone_flags,
 			get_task_struct(p);
 		}
 
+        if(clone_flags & CLONE_TIME) {
+
+            init_virtual_start_time(p, dilation);
+        }
+
 		wake_up_new_task(p);
 
 		/* forking complete and child started to run, tell ptracer */
@@ -1699,6 +1759,19 @@ SYSCALL_DEFINE5(clone, unsigned long, cl
 }
 #endif
 
+// /* virtual time ---Jiaqi */
+// SYSCALL_DEFINE5(timeclone, unsigned long, clone_flags, unsigned long, newsp, int __user *, parent_tidptr, int, tls_val, int __user*, child_tidptr)
+// {
+//     printk("[info] syscall timeclone called with with dilation value %d\n", tls_val);
+
+//     if((clone_flags & CLONE_TIME) && (tls_val != 0)) {
+//         return do_fork(clone_flags | SIGCHLD | 0x02000000, newsp, tls_val, parent_tidptr, child_tidptr);
+//     } else {
+//         return do_fork(clone_flags, newsp, 0, parent_tidptr, child_tidptr);
+//     }
+// }
+
+
 #ifndef ARCH_MIN_MMSTRUCT_ALIGN
 #define ARCH_MIN_MMSTRUCT_ALIGN 0
 #endif
@@ -1749,7 +1822,7 @@ static int check_unshare_flags(unsigned
 	if (unshare_flags & ~(CLONE_THREAD|CLONE_FS|CLONE_NEWNS|CLONE_SIGHAND|
 				CLONE_VM|CLONE_FILES|CLONE_SYSVSEM|
 				CLONE_NEWUTS|CLONE_NEWIPC|CLONE_NEWNET|
-				CLONE_NEWUSER|CLONE_NEWPID))
+				CLONE_NEWUSER|CLONE_NEWPID|CLONE_TIME))
 		return -EINVAL;
 	/*
 	 * Not implemented, but pretend it works if there is nothing to
@@ -1943,3 +2016,120 @@ int unshare_files(struct files_struct **
 	task_unlock(task);
 	return 0;
 }
+
+/*
+ * Initialize virtual time parameters in this system call --- Jiaqi
+ */
+SYSCALL_DEFINE2(virtualtimeunshare, unsigned long, unshare_flags, unsigned long, dilation)
+{
+    // printk("[info] syscall virtualtimeunshare called with with dilation value %d\n", dilation);
+
+	struct fs_struct *fs, *new_fs = NULL;
+	struct files_struct *fd, *new_fd = NULL;
+	struct cred *new_cred = NULL;
+	struct nsproxy *new_nsproxy = NULL;
+	int do_sysvsem = 0;
+	int err;
+
+	/*
+	 * If unsharing a user namespace must also unshare the thread.
+	 */
+	if (unshare_flags & CLONE_NEWUSER)
+		unshare_flags |= CLONE_THREAD | CLONE_FS;
+	/*
+	 * If unsharing a thread from a thread group, must also unshare vm.
+	 */
+	if (unshare_flags & CLONE_THREAD)
+		unshare_flags |= CLONE_VM;
+	/*
+	 * If unsharing vm, must also unshare signal handlers.
+	 */
+	if (unshare_flags & CLONE_VM)
+		unshare_flags |= CLONE_SIGHAND;
+	/*
+	 * If unsharing namespace, must also unshare filesystem information.
+	 */
+	if (unshare_flags & CLONE_NEWNS)
+		unshare_flags |= CLONE_FS;
+
+	err = check_unshare_flags(unshare_flags);
+	if (err)
+		goto bad_unshare_out;
+	/*
+	 * CLONE_NEWIPC must also detach from the undolist: after switching
+	 * to a new ipc namespace, the semaphore arrays from the old
+	 * namespace are unreachable.
+	 */
+	if (unshare_flags & (CLONE_NEWIPC|CLONE_SYSVSEM))
+		do_sysvsem = 1;
+	err = unshare_fs(unshare_flags, &new_fs);
+	if (err)
+		goto bad_unshare_out;
+	err = unshare_fd(unshare_flags, &new_fd);
+	if (err)
+		goto bad_unshare_cleanup_fs;
+	err = unshare_userns(unshare_flags, &new_cred);
+	if (err)
+		goto bad_unshare_cleanup_fd;
+	err = unshare_nsproxy_namespaces(unshare_flags, &new_nsproxy,
+					 new_cred, new_fs);
+	if (err)
+		goto bad_unshare_cleanup_cred;
+
+	if (new_fs || new_fd || do_sysvsem || new_cred || new_nsproxy) {
+		if (do_sysvsem) {
+			/*
+			 * CLONE_SYSVSEM is equivalent to sys_exit().
+			 */
+			exit_sem(current);
+		}
+
+		if (new_nsproxy)
+			switch_task_namespaces(current, new_nsproxy);
+
+		task_lock(current);
+
+		if (new_fs) {
+			fs = current->fs;
+			spin_lock(&fs->lock);
+			current->fs = new_fs;
+			if (--fs->users)
+				new_fs = NULL;
+			else
+				new_fs = fs;
+			spin_unlock(&fs->lock);
+		}
+
+		if (new_fd) {
+			fd = current->files;
+			current->files = new_fd;
+			new_fd = fd;
+		}
+
+		task_unlock(current);
+
+		/* Here we make virtual_start_time to be the current moment */
+		init_virtual_start_time(current, dilation);
+
+		if (new_cred) {
+			/* Install the new user namespace */
+			commit_creds(new_cred);
+			new_cred = NULL;
+		}
+	}
+
+bad_unshare_cleanup_cred:
+	if (new_cred)
+		put_cred(new_cred);
+bad_unshare_cleanup_fd:
+	if (new_fd)
+		put_files_struct(new_fd);
+
+bad_unshare_cleanup_fs:
+	if (new_fs)
+		free_fs_struct(new_fs);
+
+bad_unshare_out:
+	return err;
+}
+
Only in ./linux-3.16.3/kernel: freezer.c
Only in ./linux-3.16.3/kernel: futex.c
Only in ./linux-3.16.3/kernel: futex_compat.c
Only in ./linux-3.16.3/kernel: gcov
Only in ./linux-3.16.3/kernel: .gitignore
Only in ./linux-3.16.3/kernel: groups.c
Only in ./linux-3.16.3/kernel: hrtimer.c
Only in ./linux-3.16.3/kernel: hung_task.c
Only in ./linux-3.16.3/kernel: irq
Only in ./linux-3.16.3/kernel: irq_work.c
Only in ./linux-3.16.3/kernel: itimer.c
Only in ./linux-3.16.3/kernel: jump_label.c
Only in ./linux-3.16.3/kernel: kallsyms.c
Only in ./linux-3.16.3/kernel: kcmp.c
Only in ./linux-3.16.3/kernel: Kconfig.freezer
Only in ./linux-3.16.3/kernel: Kconfig.hz
Only in ./linux-3.16.3/kernel: Kconfig.locks
Only in ./linux-3.16.3/kernel: Kconfig.preempt
Only in ./linux-3.16.3/kernel: kexec.c
Only in ./linux-3.16.3/kernel: kmod.c
Only in ./linux-3.16.3/kernel: kprobes.c
Only in ./linux-3.16.3/kernel: ksysfs.c
Only in ./linux-3.16.3/kernel: kthread.c
Only in ./linux-3.16.3/kernel: latencytop.c
Only in ./linux-3.16.3/kernel: locking
Only in ./linux-3.16.3/kernel: Makefile
Only in ./linux-3.16.3/kernel: module.c
Only in ./linux-3.16.3/kernel: module-internal.h
Only in ./linux-3.16.3/kernel: module_signing.c
Only in ./linux-3.16.3/kernel: notifier.c
Only in ./linux-3.16.3/kernel: nsproxy.c
Only in ./linux-3.16.3/kernel: padata.c
Only in ./linux-3.16.3/kernel: panic.c
Only in ./linux-3.16.3/kernel: params.c
Only in ./linux-3.16.3/kernel: pid.c
Only in ./linux-3.16.3/kernel: pid_namespace.c
Only in ./linux-3.16.3/kernel: posix-cpu-timers.c
Only in ./linux-3.16.3/kernel: posix-timers.c
Only in ./linux-3.16.3/kernel: power
Only in ./linux-3.16.3/kernel: printk
Only in ./linux-3.16.3/kernel: profile.c
Only in ./linux-3.16.3/kernel: ptrace.c
Only in ./linux-3.16.3/kernel: range.c
Only in ./linux-3.16.3/kernel: rcu
Only in ./linux-3.16.3/kernel: reboot.c
Only in ./linux-3.16.3/kernel: relay.c
Only in ./linux-3.16.3/kernel: res_counter.c
Only in ./linux-3.16.3/kernel: resource.c
Only in ./linux-3.16.3/kernel: sched
Only in ./linux-3.16.3/kernel: seccomp.c
Only in ./linux-3.16.3/kernel: signal.c
Only in ./linux-3.16.3/kernel: smpboot.c
Only in ./linux-3.16.3/kernel: smpboot.h
Only in ./linux-3.16.3/kernel: smp.c
Only in ./linux-3.16.3/kernel: softirq.c
Only in ./linux-3.16.3/kernel: stacktrace.c
Only in ./linux-3.16.3/kernel: stop_machine.c
Only in ./linux-3.16.3/kernel: sys.c
Only in ./linux-3.16.3/kernel: sysctl_binary.c
Only in ./linux-3.16.3/kernel: sysctl.c
Only in ./linux-3.16.3/kernel: sys_ni.c
Only in ./linux-3.16.3/kernel: system_certificates.S
Only in ./linux-3.16.3/kernel: system_keyring.c
Only in ./linux-3.16.3/kernel: taskstats.c
Only in ./linux-3.16.3/kernel: task_work.c
Only in ./linux-3.16.3/kernel: test_kprobes.c
Only in ./linux-3.16.3/kernel/time: alarmtimer.c
Only in ./linux-3.16.3/kernel/time: clockevents.c
Only in ./linux-3.16.3/kernel/time: clocksource.c
Only in ./linux-3.16.3/kernel/time: jiffies.c
Only in ./linux-3.16.3/kernel/time: Kconfig
Only in ./linux-3.16.3/kernel/time: Makefile
Only in ./linux-3.16.3/kernel/time: ntp.c
Only in ./linux-3.16.3/kernel/time: ntp_internal.h
Only in ./linux-3.16.3/kernel/time: posix-clock.c
Only in ./linux-3.16.3/kernel/time: sched_clock.c
Only in ./linux-3.16.3/kernel/time: tick-broadcast.c
Only in ./linux-3.16.3/kernel/time: tick-broadcast-hrtimer.c
Only in ./linux-3.16.3/kernel/time: tick-common.c
Only in ./linux-3.16.3/kernel/time: tick-internal.h
Only in ./linux-3.16.3/kernel/time: tick-oneshot.c
Only in ./linux-3.16.3/kernel/time: tick-sched.c
Only in ./linux-3.16.3/kernel/time: timeconv.c
diff -rup ./linux-3.16.3/kernel/time/timekeeping.c ./vt_mininet/kernel_changes/kernel/time/timekeeping.c
--- ./linux-3.16.3/kernel/time/timekeeping.c	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/kernel/time/timekeeping.c	2019-03-13 16:02:50.804501956 +0800
@@ -19,10 +19,12 @@
 #include <linux/clocksource.h>
 #include <linux/jiffies.h>
 #include <linux/time.h>
+#include <uapi/linux/time.h>
 #include <linux/tick.h>
 #include <linux/stop_machine.h>
 #include <linux/pvclock_gtod.h>
 #include <linux/compiler.h>
+#include <linux/math64.h> // for 64bit div
 
 #include "tick-internal.h"
 #include "ntp_internal.h"
@@ -290,6 +292,116 @@ static void timekeeping_forward_now(stru
 	timespec_add_ns(&tk->raw_time, nsec);
 }
 
+/* Delta virtual time = delta physical time / TDF */
+static void do_dilatetimeofday(struct timespec *ts)
+{
+	int dilation;
+    dilation = current->dilation;
+    if(dilation > 0 && current->virtual_start_nsec > 0){
+		// printk("[info] [process %d] clock time %lld sec %lld nanosec, or %lld nanosec\n", current->pid, ts->tv_sec, ts->tv_nsec, now);
+		// printk("[info] [process %d] current virtual_start_nsec =\t%lld nanosec\n", current->pid, current->virtual_start_nsec);
+
+    	// if dilation is one, do not go through following calculations
+		// if (dilation == 1)
+		// {
+		// 	return;
+		// }
+
+    	s64 now;
+    	struct timespec dilated_ts;
+    	s64 physical_past_nsec;
+    	s64 virtual_past_nsec;
+		s32 remainder;
+
+		if(dilation < 1000){ // tdf should not be unreasonably large
+
+	        // printk("[info] [process %d] in do_dilatetimeofday current dilation = %d\n", current->pid, dilation);
+
+	        now = timespec_to_ns(ts);
+	        physical_past_nsec = now - current->virtual_start_nsec;
+
+			// printk("[info] [process %d] last physical_past_nsec =\t%lld nanosec\n", current->pid, current->physical_past_nsec);
+			// printk("[info] [process %d] last virtual_past_nsec =\t%lld nanosec\n", current->pid, current->virtual_past_nsec);
+	    	// printk("[info] [process %d] just physical_past_nsec =\t%lld nanosec\n", current->pid, physical_past_nsec);
+
+	        s64 dividend = physical_past_nsec - current->physical_past_nsec;
+
+	        // sth is wrong after last division
+	        // if (physical_past_nsec < 0 || virtual_past_nsec < 0 || dividend < 0)
+	        // {
+	            // printk("[panic] [process %d] physical_past_nsec = %lld , virtual_past_nsec = %lld or dividend = %lld < 0\n", current->pid, physical_past_nsec, virtual_past_nsec, dividend);
+	            // printk("[panic] [process %d] physical_past_nsec = %lld\n", physical_past_nsec);
+				// printk("[panic] [process %d] virtual_past_nsec = %lld\n", virtual_past_nsec);
+				// printk("[panic] [process %d] dividend = %lld\n", dividend);
+				// return;
+	        // }
+
+			s64 divisor = div_u64_rem(dividend, dilation, &remainder);
+	        virtual_past_nsec = divisor + current->virtual_past_nsec;
+
+			// printk("[info] [process %d] %lld / %d = %lld ... %ld\n", current->pid, dividend, dilation, divisor, remainder);
+	    	// printk("[info] [process %d] just virtual_past_nsec =\t%lld nanosec\n", current->pid, virtual_past_nsec);
+
+	        // last do_dilatetimeofday() failed
+	        // if (dilation > 1 && virtual_past_nsec > physical_past_nsec)
+	        // {
+	            // printk("[panic] [process %d] virtual time faster than physical when dilation = %d", dilation);
+				// printk("[panic] [process %d] dilation = %d > 1\n", dilation);
+				// printk("[panic] [process %d] physical_past_nsec = %lld\n", physical_past_nsec);
+				// printk("[panic] [process %d] virtual_past_nsec = %lld\n", virtual_past_nsec);
+				// return;
+	        // }
+
+	        // last do_dilatetimeofday() failed
+	        // if (dilation < 1 && virtual_past_nsec < physical_past_nsec)
+	        // {
+	            // printk("[panic] [process %d] virtual time slower than physical when dilation = %d", dilation);
+	            // printk("[panic] [process %d] dilation = %d < 1\n", dilation);
+				// printk("[panic] [process %d] physical_past_nsec = %lld\n", physical_past_nsec);
+				// printk("[panic] [process %d] virtual_past_nsec = %lld\n", virtual_past_nsec);
+				// return;
+	        // }
+
+	        s64 dilated_now = virtual_past_nsec + current->virtual_start_nsec;
+
+	        if (dilation > 1 && dilated_now > now)
+	        {
+				printk("[panic] [process %d] VT faster RT when dilation = %d (dilated_now = %lld > now = %lld\n)", dilation, dilated_now, now);
+				return;
+	        }
+
+			// if (dilation < 1 && dilated_now < now)
+			// {
+				// printk("[panic] [process %d] virtual time slower than physical when dilation = %d", dilation);
+				// printk("[panic] [process %d] dilation = %d < 1\n", dilation);
+				// printk("[panic] [process %d] dilated_now = %lld < now = %lld\n", dilated_now, now);
+				// return;
+	        // }
+
+			dilated_ts = ns_to_timespec(dilated_now);
+
+	        // printk("[info] [process %d] dilated time %lld sec %lld nanosec, or %lld nanosec\n", current->pid, dilated_ts.tv_sec, dilated_ts.tv_nsec, dilated_now);
+
+	        ts->tv_sec = dilated_ts.tv_sec;
+	        ts->tv_nsec = dilated_ts.tv_nsec;
+			current->physical_past_nsec = physical_past_nsec;
+	    	current->virtual_past_nsec = virtual_past_nsec;
+			// printk("[info] [process %d] in do_dilatetimeofday: total physical past \t%lld nanosec\n", current->pid, physical_past_nsec);
+	        // printk("[info] [process %d] in do_dilatetimeofday: total virtual past \t%lld nanosec\n", current->pid, virtual_past_nsec);
+
+			// re-check
+			// if (virtual_past_nsec != 0)
+			// {
+			// 	s64 actual_dilation = physical_past_nsec / virtual_past_nsec; // div_u64_rem(physical_past_nsec, virtual_past_nsec, &remainder);
+			// 	printk("[info] [process %d] in do_dilatetimeofday: actual dilation(%lld), should-be dilation(%d)\n", current->pid, actual_dilation, current->dilation);
+			// }
+        }
+        // printk("[info] [process %d] total physical past \t%lld nanosec\n", current->pid, physical_past_nsec);
+        // printk("[info] [process %d] total virtual past \t%lld nanosec\n", current->pid, virtual_past_nsec);
+		// printk("[info] [process %d] return time %lld sec %lld nanosec, or %lld nanosec\n", current->pid, ts->tv_sec, ts->tv_nsec, now);
+    }
+}
+
 /**
  * __getnstimeofday - Returns the time of day in a timespec.
  * @ts:		pointer to the timespec to be set
@@ -320,6 +432,15 @@ int __getnstimeofday(struct timespec *ts
 	 */
 	if (unlikely(timekeeping_suspended))
 		return -EAGAIN;
+
+	/* Dilate time */
+	// s64 now = timespec_to_ns(ts);
+	// printk("[info] getnstimeofday before do_dilatetimeofday: %ld nano seconds\n", now);
+
+    // now = timespec_to_ns(ts);
+	// printk("[info] getnstimeofday after do_dilatetimeofday: %ld nano seconds\n", now);
+	do_dilatetimeofday(ts);
+
 	return 0;
 }
 EXPORT_SYMBOL(__getnstimeofday);
@@ -355,6 +476,18 @@ ktime_t ktime_get(void)
 	 * 32-bit architectures without CONFIG_KTIME_SCALAR.
 	 */
 	return ktime_add_ns(ktime_set(secs, 0), nsecs);
+
+    /* Dilated time
+    struct timespec ts = ktime_to_timespec(ktime_add_ns(ktime_set(secs, 0), nsecs));
+
+	// s64 now = timespec_to_ns(&ts);
+	// printk("[info] ktime_get before do_dilatetimeofday: %ld nano seconds\n", now);
+    // do_dilatetimeofday(&ts);
+    // now = timespec_to_ns(&ts);
+	// printk("[info] ktime_get after do_dilatetimeofday: %ld nano seconds\n", now);
+
+    return timespec_to_ktime(ts);
+    */
 }
 EXPORT_SYMBOL_GPL(ktime_get);
 
Only in ./linux-3.16.3/kernel/time: timekeeping_debug.c
Only in ./linux-3.16.3/kernel/time: timekeeping_internal.h
Only in ./linux-3.16.3/kernel/time: timer_list.c
Only in ./linux-3.16.3/kernel/time: timer_stats.c
diff -rup ./linux-3.16.3/kernel/time.c ./vt_mininet/kernel_changes/kernel/time.c
--- ./linux-3.16.3/kernel/time.c	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/kernel/time.c	2019-03-13 16:02:50.804501956 +0800
@@ -37,7 +37,7 @@
 #include <linux/fs.h>
 #include <linux/math64.h>
 #include <linux/ptrace.h>
-
+#include <linux/rcupdate.h> // for accessing current's parent
 #include <asm/uaccess.h>
 #include <asm/unistd.h>
 
@@ -98,12 +98,121 @@ SYSCALL_DEFINE1(stime, time_t __user *,
 
 #endif /* __ARCH_WANT_SYS_TIME */
 
+
 SYSCALL_DEFINE2(gettimeofday, struct timeval __user *, tv,
 		struct timezone __user *, tz)
 {
-	if (likely(tv != NULL)) {
+	// printk("[info] [process %d] in normal gettimeofday\n", current->pid);
+    if (likely(tv != NULL)) {
+		struct timeval ktv;
+		do_gettimeofday(&ktv);
+
+		if (copy_to_user(tv, &ktv, sizeof(ktv)))
+			return -EFAULT;
+	}
+	if (unlikely(tz != NULL)) {
+		if (copy_to_user(tz, &sys_tz, sizeof(sys_tz)))
+			return -EFAULT;
+	}
+	return 0;
+}
+
+/*
+SYSCALL_DEFINE2(gettimeofday, struct timeval __user *, tv, struct timezone __user *, tz)
+{
+    if (likely(tv != NULL)) {
+		struct timeval ktv;
+		do_gettimeofday(&ktv);
+
+
+        if(current->virtual_start_time != 0) {
+
+            s64 now = timeval_to_ns(&ktv);
+            s64 physical_past_time;
+            s64 virtual_past_time;
+            s32 remainder;
+            int dilation = current->dilation;
+            physical_past_time = now - current->virtual_start_time;
+
+            // printk("[info] [process %d] gettimeofday is using dilation %d\n", current->pid, dilation);
+
+            // printk("[info] [process %d] physical past %ld nanosec from start\n", current->pid, physical_past_time);
+            if(dilation > 0) {
+                s64 dividend = physical_past_time - current->physical_past_time;
+                s64 divisor = div_u64_rem(dividend, dilation, &remainder);
+                // dilation is multiplied by 1000 when used as input
+                virtual_past_time = divisor * 1000 + current->virtual_past_time;
+                now = virtual_past_time + current->virtual_start_time;
+                // printk("[info] [process %d] %ld / %d = %ld ... %ld\n", current->pid, dividend, dilation, divisor, remainder);
+            } else {
+                virtual_past_time = (physical_past_time - current->physical_past_time) + current->virtual_past_time;
+                now = virtual_past_time + current->virtual_start_time;
+            }
+            // printk("[info] [process %d] virtual past %ld nanosec from start\n", current->pid, virtual_past_time);
+
+            ktv = ns_to_timeval(now);
+            current->physical_past_time = physical_past_time;
+            current->virtual_past_time = virtual_past_time;
+        } else {
+        	printk("[info] [process %d] gettimeofday is not using dilation", current->pid);
+        }
+
+		if (copy_to_user(tv, &ktv, sizeof(ktv)))
+			return -EFAULT;
+	}
+	if (unlikely(tz != NULL)) {
+		if (copy_to_user(tz, &sys_tz, sizeof(sys_tz)))
+			return -EFAULT;
+	}
+	return 0;
+}
+*/
+
+/*
+ *  Virtual past time = physical past time / dilation
+ *	Do any other things that normal gettimeofday does
+ *  getvirtualtimeofday --- Jiaqi Shoud not call this function now that gettimeofday can be captured
+ */
+SYSCALL_DEFINE2(getvirtualtimeofday, struct timeval __user *, tv,
+		struct timezone __user *, tz)
+{
+	// printk("[info] [process %d] entry to getvirtualtimeofday syscall\n", current->pid);
+    if (likely(tv != NULL)) {
 		struct timeval ktv;
 		do_gettimeofday(&ktv);
+
+
+        if(current->virtual_start_time != 0) {
+
+            s64 now = timeval_to_ns(&ktv);
+            s64 physical_past_time;
+            s64 virtual_past_time;
+            s32 remainder;
+            int dilation = current->dilation;
+            physical_past_time = now - current->virtual_start_time;
+            // printk("[info] [process %d] getvirtualtimeofday is using dilation %d\n", current->pid, dilation);
+
+            // printk("[info] [process %d] physical past %ld nanosec from start\n", current->pid, physical_past_time);
+            if(dilation > 0) {
+                s64 dividend = physical_past_time - current->physical_past_time;
+                s64 divisor = div_u64_rem(dividend, dilation, &remainder);
+                // dilation is multiplied by 1000 when used as input
+                virtual_past_time = divisor + current->virtual_past_time;
+                now = virtual_past_time + current->virtual_start_time;
+                // printk("[info] [process %d] %ld / %d = %ld ... %ld\n", current->pid, dividend, dilation, divisor, remainder);
+            } else {
+                virtual_past_time = (physical_past_time - current->physical_past_time) + current->virtual_past_time;
+                now = virtual_past_time + current->virtual_start_time;
+            }
+            // printk("[info] [process %d] virtual past %ld nanosec from start\n", current->pid, virtual_past_time);
+
+            ktv = ns_to_timeval(now);
+            current->physical_past_time = physical_past_time;
+            current->virtual_past_time = virtual_past_time;
+        } else {
+            printk("[info] [process %d] getvirtualtimeofday is not using time dilation", current->pid);
+        }
+
 		if (copy_to_user(tv, &ktv, sizeof(ktv)))
 			return -EFAULT;
 	}
@@ -115,6 +224,87 @@ SYSCALL_DEFINE2(gettimeofday, struct tim
 }
 
 /*
+ * Change current process's time dilation factor --- Jiaqi Yan
+ * What below is a total copy of init_virtual_start_time in fork.c
+ */
+SYSCALL_DEFINE2(settimedilationfactor, unsigned long, dilation, pid_t, ppid)
+{
+	if (dilation > 0) {
+
+		struct timeval now;
+		struct timespec ts;
+
+		if (ppid == 0) // change current's dilation
+		{
+			/* reset virtual_start so that we can get original time */
+			current->dilation = 0;
+
+			/* reset time fields, old version */
+			// current->virtual_start_time = 0;
+			// do_gettimeofday(&now);
+			// current->virtual_start_time = timeval_to_ns(&now);
+			// current->physical_past_time = 0;
+			// current->virtual_past_time = 0;
+
+			/* reset nsec fields, current version */
+			current->virtual_start_nsec = 0;
+			getnstimeofday(&ts);
+			current->virtual_start_nsec = timespec_to_ns(&ts);
+			current->physical_past_nsec = 0;
+			current->virtual_past_nsec = 0;
+
+			current->dilation = dilation;
+
+			// printk("[info] [process %d] in settimedilationfactor: change/set dilation to %ld\n", current->pid, current->dilation);
+			// printk("[info] [process %d] in settimedilationfactor: virtual RESTART time = %lld nano secs\n", current->pid, current->virtual_start_nsec);
+
+		} else { // change current's parent's dilation
+
+			/*
+			 * To access parent's data, we need to lock and unlock;
+			 * see https://www.kernel.org/doc/Documentation/RCU/whatisRCU.txt for more details
+			 */
+			rcu_read_lock();
+
+			struct task_struct* parent = rcu_dereference(current->real_parent);
+
+			/* pid_t == __kernel_pid_t == int */
+			if (!parent || parent->pid != ppid)
+			{
+				rcu_read_unlock();
+				return -1;
+			}
+
+			parent->dilation = 0;
+
+			/* reset virtual_start so that we can get original time */
+
+			/* reset time fields, old version */
+			// parent->virtual_start_time = 0;
+			// do_gettimeofday(&now);
+			// parent->virtual_start_time = timeval_to_ns(&now);
+			// parent->physical_past_time = 0;
+			// parent->virtual_past_time = 0;
+
+			/* reset nsec fields, current version */
+			parent->virtual_start_nsec = 0;
+			getnstimeofday(&ts);
+			parent->virtual_start_nsec = timespec_to_ns(&ts);
+			parent->physical_past_nsec = 0;
+			parent->virtual_past_nsec = 0;
+
+			parent->dilation = dilation;
+
+			// printk("[info] [process %d] in settimedilationfactor: change/set process %d's dilation to %ld\n", current->pid, parent->pid, parent->dilation);
+			// printk("[info] [process %d] in settimedilationfactor: process %d's virtual RESTART time = %lld nano secs\n", current->pid, parent->pid, parent->virtual_start_nsec);
+
+			rcu_read_unlock();
+		}
+	}
+	return 0;
+}
+
+/*
  * Indicates if there is an offset between the system clock and the hardware
  * clock/persistent clock/rtc.
  */
@@ -396,7 +586,7 @@ struct timespec ns_to_timespec(const s64
 		ts.tv_sec--;
 		rem += NSEC_PER_SEC;
 	}
-	ts.tv_nsec = rem;
+    ts.tv_nsec = rem;
 
 	return ts;
 }
Only in ./linux-3.16.3/kernel: timeconst.bc
Only in ./linux-3.16.3/kernel: timer.c
Only in ./linux-3.16.3/kernel: torture.c
Only in ./linux-3.16.3/kernel: trace
Only in ./linux-3.16.3/kernel: tracepoint.c
Only in ./linux-3.16.3/kernel: tsacct.c
Only in ./linux-3.16.3/kernel: uid16.c
Only in ./linux-3.16.3/kernel: up.c
Only in ./linux-3.16.3/kernel: user.c
Only in ./linux-3.16.3/kernel: user_namespace.c
Only in ./linux-3.16.3/kernel: user-return-notifier.c
Only in ./linux-3.16.3/kernel: utsname.c
Only in ./linux-3.16.3/kernel: utsname_sysctl.c
Only in ./linux-3.16.3/kernel: watchdog.c
Only in ./linux-3.16.3/kernel: workqueue.c
Only in ./linux-3.16.3/kernel: workqueue_internal.h
Only in ./linux-3.16.3/: lib
Only in ./linux-3.16.3/: .mailmap
Only in ./linux-3.16.3/: MAINTAINERS
diff -rup ./linux-3.16.3/Makefile ./vt_mininet/kernel_changes/Makefile
--- ./linux-3.16.3/Makefile	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/Makefile	2019-03-13 16:02:50.800501962 +0800
@@ -839,7 +839,7 @@ export mod_sign_cmd
 
 
 ifeq ($(KBUILD_EXTMOD),)
-core-y		+= kernel/ mm/ fs/ ipc/ security/ crypto/ block/
+core-y		+= kernel/ mm/ fs/ ipc/ security/ crypto/ block/ virtual_time/
 
 vmlinux-dirs	:= $(patsubst %/,%,$(filter %/, $(init-y) $(init-m) \
 		     $(core-y) $(core-m) $(drivers-y) $(drivers-m) \
Only in ./linux-3.16.3/: mm
Only in ./linux-3.16.3/net: 802
Only in ./linux-3.16.3/net: 8021q
Only in ./linux-3.16.3/net: 9p
Only in ./linux-3.16.3/net: appletalk
Only in ./linux-3.16.3/net: atm
Only in ./linux-3.16.3/net: ax25
Only in ./linux-3.16.3/net: batman-adv
Only in ./linux-3.16.3/net: bluetooth
Only in ./linux-3.16.3/net: bridge
Only in ./linux-3.16.3/net: caif
Only in ./linux-3.16.3/net: can
Only in ./linux-3.16.3/net: ceph
Only in ./linux-3.16.3/net: compat.c
Only in ./linux-3.16.3/net: core
Only in ./linux-3.16.3/net: dcb
Only in ./linux-3.16.3/net: dccp
Only in ./linux-3.16.3/net: decnet
Only in ./linux-3.16.3/net: dns_resolver
Only in ./linux-3.16.3/net: dsa
Only in ./linux-3.16.3/net: ethernet
Only in ./linux-3.16.3/net: hsr
Only in ./linux-3.16.3/net: ieee802154
Only in ./linux-3.16.3/net: ipv4
Only in ./linux-3.16.3/net: ipv6
Only in ./linux-3.16.3/net: ipx
Only in ./linux-3.16.3/net: irda
Only in ./linux-3.16.3/net: iucv
Only in ./linux-3.16.3/net: Kconfig
Only in ./linux-3.16.3/net: key
Only in ./linux-3.16.3/net: l2tp
Only in ./linux-3.16.3/net: lapb
Only in ./linux-3.16.3/net: llc
Only in ./linux-3.16.3/net: mac80211
Only in ./linux-3.16.3/net: mac802154
Only in ./linux-3.16.3/net: Makefile
Only in ./linux-3.16.3/net: mpls
Only in ./linux-3.16.3/net: netfilter
Only in ./linux-3.16.3/net: netlabel
Only in ./linux-3.16.3/net: netlink
Only in ./linux-3.16.3/net: netrom
Only in ./linux-3.16.3/net: nfc
Only in ./linux-3.16.3/net: nonet.c
Only in ./linux-3.16.3/net: openvswitch
Only in ./linux-3.16.3/net: packet
Only in ./linux-3.16.3/net: phonet
Only in ./linux-3.16.3/net: rds
Only in ./linux-3.16.3/net: rfkill
Only in ./linux-3.16.3/net: rose
Only in ./linux-3.16.3/net: rxrpc
Only in ./linux-3.16.3/net/sched: act_api.c
Only in ./linux-3.16.3/net/sched: act_csum.c
Only in ./linux-3.16.3/net/sched: act_gact.c
Only in ./linux-3.16.3/net/sched: act_ipt.c
Only in ./linux-3.16.3/net/sched: act_mirred.c
Only in ./linux-3.16.3/net/sched: act_nat.c
Only in ./linux-3.16.3/net/sched: act_pedit.c
diff -rup ./linux-3.16.3/net/sched/act_police.c ./vt_mininet/kernel_changes/net/sched/act_police.c
--- ./linux-3.16.3/net/sched/act_police.c	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/net/sched/act_police.c	2019-03-13 16:02:50.804501956 +0800
@@ -201,6 +201,7 @@ override:
 	if (R_tab) {
 		police->rate_present = true;
 		psched_ratecfg_precompute(&police->rate, &R_tab->rate, 0);
+		printk("[info] in tcf_act_police_locate: police->rate(%llu), R_tab->rate(%llu), dilation(%d)\n", police->rate.rate_bytes_ps, R_tab->rate.rate, current->dilation);
 		qdisc_put_rtab(R_tab);
 	} else {
 		police->rate_present = false;
Only in ./linux-3.16.3/net/sched: act_simple.c
Only in ./linux-3.16.3/net/sched: act_skbedit.c
Only in ./linux-3.16.3/net/sched: cls_api.c
Only in ./linux-3.16.3/net/sched: cls_basic.c
Only in ./linux-3.16.3/net/sched: cls_bpf.c
Only in ./linux-3.16.3/net/sched: cls_cgroup.c
Only in ./linux-3.16.3/net/sched: cls_flow.c
Only in ./linux-3.16.3/net/sched: cls_fw.c
Only in ./linux-3.16.3/net/sched: cls_route.c
Only in ./linux-3.16.3/net/sched: cls_rsvp6.c
Only in ./linux-3.16.3/net/sched: cls_rsvp.c
Only in ./linux-3.16.3/net/sched: cls_rsvp.h
Only in ./linux-3.16.3/net/sched: cls_tcindex.c
Only in ./linux-3.16.3/net/sched: cls_u32.c
Only in ./linux-3.16.3/net/sched: ematch.c
Only in ./linux-3.16.3/net/sched: em_canid.c
Only in ./linux-3.16.3/net/sched: em_cmp.c
Only in ./linux-3.16.3/net/sched: em_ipset.c
Only in ./linux-3.16.3/net/sched: em_meta.c
Only in ./linux-3.16.3/net/sched: em_nbyte.c
Only in ./linux-3.16.3/net/sched: em_text.c
Only in ./linux-3.16.3/net/sched: em_u32.c
Only in ./linux-3.16.3/net/sched: Kconfig
Only in ./linux-3.16.3/net/sched: Makefile
Only in ./linux-3.16.3/net/sched: sch_atm.c
Only in ./linux-3.16.3/net/sched: sch_blackhole.c
Only in ./linux-3.16.3/net/sched: sch_cbq.c
Only in ./linux-3.16.3/net/sched: sch_choke.c
Only in ./linux-3.16.3/net/sched: sch_codel.c
Only in ./linux-3.16.3/net/sched: sch_drr.c
Only in ./linux-3.16.3/net/sched: sch_dsmark.c
Only in ./linux-3.16.3/net/sched: sch_fifo.c
Only in ./linux-3.16.3/net/sched: sch_fq.c
Only in ./linux-3.16.3/net/sched: sch_fq_codel.c
diff -rup ./linux-3.16.3/net/sched/sch_generic.c ./vt_mininet/kernel_changes/net/sched/sch_generic.c
--- ./linux-3.16.3/net/sched/sch_generic.c	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/net/sched/sch_generic.c	2019-03-13 16:02:50.808501951 +0800
@@ -917,7 +917,14 @@ void psched_ratecfg_precompute(struct ps
 {
 	memset(r, 0, sizeof(*r));
 	r->overhead = conf->overhead;
+	r->undilated_rate_bytes_ps = max_t(u64, conf->rate, rate64);
 	r->rate_bytes_ps = max_t(u64, conf->rate, rate64);
+	if (current && current->dilation > 1)
+	{
+		r->rate_bytes_ps = r->undilated_rate_bytes_ps / current->dilation;
+		printk("[info] in psched_ratecfg_precompute: rate(%llu) dilated(%d) from origin(%llu)\n", r->rate_bytes_ps, current->dilation, r->undilated_rate_bytes_ps);
+	}
+
 	r->linklayer = (conf->linklayer & TC_LINKLAYER_MASK);
 	r->mult = 1;
 	/*
@@ -944,5 +951,32 @@ void psched_ratecfg_precompute(struct ps
 			r->shift++;
 		}
 	}
+	// printk("[info] ratecfg = {rate(%llu), mult(%d), overhead(%d), linklayer(%d), shift(%d)}\n", r->rate_bytes_ps, r->mult, r->overhead, r->linklayer, r->shift);
 }
 EXPORT_SYMBOL(psched_ratecfg_precompute);
+
+void psched_ratecfg_dilate(struct psched_ratecfg *r, int dilation)
+{
+	if (r && dilation > 1)
+	{
+		r->rate_bytes_ps = r->undilated_rate_bytes_ps / dilation;
+		printk("[info] [process %d] in psched_ratecfg_dilate: change rate to %llu due to change of tdf(%d)\n", current->pid, r->rate_bytes_ps, dilation);
+
+		r->mult = 1;
+		r->shift = 0;
+		if (r->rate_bytes_ps > 0)
+		{
+			/* not sure what this code does, but better redo it after updating rate_bytes_ps */
+			u64 factor = NSEC_PER_SEC;
+			for (;;) {
+				r->mult = div64_u64(factor, r->rate_bytes_ps);
+				if (r->mult & (1U << 31) || factor & (1ULL << 63))
+					break;
+				factor <<= 1;
+				r->shift++;
+			}
+		}
+	}
+}
+EXPORT_SYMBOL(psched_ratecfg_dilate);
+
Only in ./linux-3.16.3/net/sched: sch_gred.c
Only in ./linux-3.16.3/net/sched: sch_hfsc.c
Only in ./linux-3.16.3/net/sched: sch_hhf.c
diff -rup ./linux-3.16.3/net/sched/sch_htb.c ./vt_mininet/kernel_changes/net/sched/sch_htb.c
--- ./linux-3.16.3/net/sched/sch_htb.c	2014-09-18 01:22:16.000000000 +0800
+++ ./vt_mininet/kernel_changes/net/sched/sch_htb.c	2019-03-13 16:02:50.808501951 +0800
@@ -37,6 +37,9 @@
 #include <linux/rbtree.h>
 #include <linux/workqueue.h>
 #include <linux/slab.h>
+#include <linux/rcupdate.h> // for accessing parent process
+#include <linux/sched.h> // for accessing current
+
 #include <net/netlink.h>
 #include <net/sch_generic.h>
 #include <net/pkt_sched.h>
@@ -97,6 +100,7 @@ struct htb_prio {
 struct htb_class {
 	struct Qdisc_class_common common;
 	struct psched_ratecfg	rate;
+	int dilation;
 	struct psched_ratecfg	ceil;
 	s64			buffer, cbuffer;/* token bucket depth/rate */
 	s64			mbuffer;	/* max wait time */
@@ -857,6 +861,26 @@ next:
 
 	} while (cl != start);
 
+	/* polling host process about dilation info; update rate when necessary */
+	int dilation = 0;
+	if (current)
+	{
+		/* get tdf, possibly an updated one */
+		rcu_read_lock();
+		struct task_struct *parent = rcu_dereference(current->real_parent);
+		// printk("[info] [process %d] in htb_dequeue_tree: current's parent(%d) dilation(%d)\n", current->pid, parent->pid, parent->dilation);
+		dilation = parent->dilation;
+		rcu_read_unlock();
+	}
+	/* until now, still not sure if this the should-dilated htb class */
+	if (dilation > 0 && dilation != cl->dilation)
+	{
+		cl->dilation = dilation; // update dilation
+		printk("[info] [process %d] in htb_dequeue_tree: change tdf to %d\n", current->pid, cl->dilation);
+		psched_ratecfg_dilate(&cl->rate, cl->dilation); // update rate
+	}
+
+
 	if (likely(skb != NULL)) {
 		bstats_update(&cl->bstats, skb);
 		cl->un.leaf.deficit[level] -= qdisc_pkt_len(skb);
@@ -895,10 +919,13 @@ ok:
 
 	if (!sch->q.qlen)
 		goto fin;
+
 	q->now = ktime_to_ns(ktime_get());
+	// printk("[info] in htb_dequeue q->now in ns: %lld\n", q->now);
 	start_at = jiffies;
 
 	next_event = q->now + 5LLU * NSEC_PER_SEC;
+	// printk("[info] in htb_dequeue next_event in ns: %lld\n", next_event);
 
 	for (level = 0; level < TC_HTB_MAXDEPTH; level++) {
 		/* common case optimization - skip event handler quickly */
@@ -925,6 +952,8 @@ ok:
 				goto ok;
 		}
 	}
+	// printk("[info] in htb_dequeue next_event in ns: %lld\n", next_event);
+
 	sch->qstats.overlimits++;
 	if (likely(next_event > q->now)) {
 		if (!test_bit(__QDISC_STATE_DEACTIVATED,
@@ -1057,6 +1086,23 @@ static int htb_init(struct Qdisc *sch, s
 		q->rate2quantum = 1;
 	q->defcls = gopt->defcls;
 
+	/*
+	int copy = -1;
+	if (current)
+	{
+		if (current->dilation > 0)
+		{
+			copy = q->rate2quantum;
+			// wrong!!! modify rate2quantum will crash OS
+			// q->rate2quantum = q->rate2quantum / current->dilation;
+		}
+	} else {
+		printk("[panic] in htb_init current is NULL");
+	}
+
+	printk("[info] in htb_init: q->rate2quantum(%d), old copy(%d)", q->rate2quantum, copy);
+	*/
+	
 	return 0;
 }
 
@@ -1111,7 +1157,12 @@ static int htb_dump_class(struct Qdisc *
 
 	memset(&opt, 0, sizeof(opt));
 
+	// printk("[info] in htb_dump_class: cl->rate.rate_bytes_ps(%llu)\n", cl->rate.rate_bytes_ps);
+	// printk("[info] in htb_dump_class: opt.rate.rate(%u)\n", opt.rate.rate);
 	psched_ratecfg_getrate(&opt.rate, &cl->rate);
+	// printk("[info] in htb_dump_class: cl->rate.rate_bytes_ps(%llu)\n", cl->rate.rate_bytes_ps);
+	// printk("[info] in htb_dump_class: opt.rate.rate(%u)\n", opt.rate.rate);
+
 	opt.buffer = PSCHED_NS2TICKS(cl->buffer);
 	psched_ratecfg_getrate(&opt.ceil, &cl->ceil);
 	opt.cbuffer = PSCHED_NS2TICKS(cl->cbuffer);
@@ -1477,7 +1528,11 @@ static int htb_change_class(struct Qdisc
 
 	ceil64 = tb[TCA_HTB_CEIL64] ? nla_get_u64(tb[TCA_HTB_CEIL64]) : 0;
 
+	// printk("[info] in htb_change_class: rate64(%llu)\n", rate64);
+	// printk("[info] in htb_change_class: 1. write hopt->rate.rate(%u) to cl->rate.rate_bytes_ps\n", hopt->rate.rate);
 	psched_ratecfg_precompute(&cl->rate, &hopt->rate, rate64);
+	// printk("[info] in htb_change_class: 2. after dilation, cl->rate.rate_bytes_ps = %llu\n", cl->rate.rate_bytes_ps);
+
 	psched_ratecfg_precompute(&cl->ceil, &hopt->ceil, ceil64);
 
 	/* it used to be a nasty bug here, we have to check that node
Only in ./linux-3.16.3/net/sched: sch_ingress.c
Only in ./linux-3.16.3/net/sched: sch_mq.c
Only in ./linux-3.16.3/net/sched: sch_mqprio.c
Only in ./linux-3.16.3/net/sched: sch_multiq.c
Only in ./linux-3.16.3/net/sched: sch_netem.c
Only in ./linux-3.16.3/net/sched: sch_pie.c
Only in ./linux-3.16.3/net/sched: sch_plug.c
Only in ./linux-3.16.3/net/sched: sch_prio.c
Only in ./linux-3.16.3/net/sched: sch_qfq.c
Only in ./linux-3.16.3/net/sched: sch_red.c
Only in ./linux-3.16.3/net/sched: sch_sfb.c
Only in ./linux-3.16.3/net/sched: sch_sfq.c
Only in ./linux-3.16.3/net/sched: sch_tbf.c
Only in ./linux-3.16.3/net/sched: sch_teql.c
Only in ./linux-3.16.3/net: sctp
Only in ./linux-3.16.3/net: socket.c
Only in ./linux-3.16.3/net: sunrpc
Only in ./linux-3.16.3/net: sysctl_net.c
Only in ./linux-3.16.3/net: tipc
Only in ./linux-3.16.3/net: unix
Only in ./linux-3.16.3/net: vmw_vsock
Only in ./linux-3.16.3/net: wimax
Only in ./linux-3.16.3/net: wireless
Only in ./linux-3.16.3/net: x25
Only in ./linux-3.16.3/net: xfrm
Only in ./vt_mininet/kernel_changes/: patch_description.md
Only in ./linux-3.16.3/: README
Only in ./linux-3.16.3/: REPORTING-BUGS
Only in ./linux-3.16.3/: samples
Only in ./linux-3.16.3/: scripts
Only in ./linux-3.16.3/: security
Only in ./linux-3.16.3/: sound
Only in ./vt_mininet/kernel_changes/: syscall_wrapper
Only in ./linux-3.16.3/: tools
Only in ./vt_mininet/kernel_changes/: transfer.sh
Only in ./linux-3.16.3/: usr
Only in ./linux-3.16.3/: virt
Only in ./vt_mininet/kernel_changes/: virtual_time
